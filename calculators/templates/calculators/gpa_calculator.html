{% extends 'calculators/base.html' %}
{% load static %}

{% block title %}GPA Calculator - Calculate Grade Point Average{% endblock %}

{% block content %}
<div class="gpa-calculator-style">
    <!-- Breadcrumb Navigation -->
    <div class="breadcrumb-nav">
        <a href="{% url 'calculators:home' %}">home</a> / 
        <a href="{% url 'calculators:home' %}">academic</a> / 
        <span>gpa calculator</span>
    </div>

    <!-- Main Heading with Academic Theme -->
    <div class="academic-header">
        <div class="header-content">
            <div class="academic-icon">üéì</div>
            <div class="header-text">
                <h1 class="main-title">GPA Calculator</h1>
                <p class="subtitle">Calculate your Grade Point Average with precision and get detailed academic insights</p>
            </div>
        </div>
        <div class="gpa-stats">
            <div class="stat-item">
                <div class="stat-value">4.0</div>
                <div class="stat-label">Max GPA</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">A+</div>
                <div class="stat-label">Highest Grade</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">‚àû</div>
                <div class="stat-label">Calculations</div>
            </div>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Left Content -->
        <div class="left-content">
            <!-- GPA Input Section -->
            <div class="gpa-input-section">
                <div class="section-header">
                    <h2>üìä Enter Your Course Information</h2>
                    <div class="semester-selector">
                        <label>Semester/Term:</label>
                        <select id="semester-select" class="semester-dropdown">
                            <option value="current">Current Semester</option>
                            <option value="fall2024">Fall 2024</option>
                            <option value="spring2024">Spring 2024</option>
                            <option value="summer2024">Summer 2024</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                </div>

                <!-- Course Entry Form -->
                <div class="course-entry-container">
                    <div class="course-headers">
                        <div class="header-col subject-col">Course/Subject</div>
                        <div class="header-col grade-col">Grade</div>
                        <div class="header-col credits-col">Credit Hours</div>
                        <div class="header-col points-col">Quality Points</div>
                        <div class="header-col action-col">Action</div>
                    </div>
                    
                    <div id="courses-container">
                        <!-- Course rows will be dynamically added here -->
                    </div>
                    
                    <div class="add-course-section">
                        <button type="button" class="add-course-btn" id="add-course-btn">
                            <i class="plus-icon">+</i>
                            Add Course
                        </button>
                        <button type="button" class="load-sample-btn" id="load-sample-btn">
                            <i class="sample-icon">üìù</i>
                            Load Sample Data
                        </button>
                    </div>
                </div>

                <!-- Calculate Section -->
                <div class="calculate-section">
                    <div class="calculation-controls">
                        <button type="button" class="calculate-gpa-btn" id="calculate-gpa-btn">
                            <span class="calc-icon">üßÆ</span>
                            Calculate GPA
                        </button>
                        <button type="button" class="clear-all-btn" id="clear-all-btn">
                            <span class="clear-icon">üóëÔ∏è</span>
                            Clear All
                        </button>
                        <button type="button" class="save-btn" id="save-btn">
                            <span class="save-icon">üíæ</span>
                            Save
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="gpa-results-section" class="results-section" style="display: none;">
                <div class="results-header">
                    <h2>üìà Your Academic Results</h2>
                    <div class="results-date" id="results-date"></div>
                </div>
                
                <div class="results-grid">
                    <!-- Main GPA Display -->
                    <div class="main-gpa-card">
                        <div class="gpa-display">
                            <div class="gpa-label">Overall GPA</div>
                            <div class="gpa-value" id="main-gpa-value">0.00</div>
                            <div class="gpa-scale">out of 4.0</div>
                        </div>
                        <div class="gpa-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="gpa-progress-fill"></div>
                            </div>
                            <div class="progress-labels">
                                <span>0.0</span>
                                <span>2.0</span>
                                <span>3.0</span>
                                <span>4.0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Academic Standing -->
                    <div class="academic-standing-card">
                        <div class="standing-header">Academic Standing</div>
                        <div class="standing-badge" id="academic-standing">Excellent</div>
                        <div class="standing-description" id="standing-description">
                            You're performing exceptionally well!
                        </div>
                    </div>

                    <!-- Statistics -->
                    <div class="stats-card">
                        <div class="stat-row">
                            <span class="stat-label">Total Credit Hours:</span>
                            <span class="stat-value" id="total-credits">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Quality Points:</span>
                            <span class="stat-value" id="quality-points">0.00</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Average Grade:</span>
                            <span class="stat-value" id="average-grade">N/A</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Percentage:</span>
                            <span class="stat-value" id="percentage">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Grade Distribution Chart -->
                <div class="grade-distribution-section">
                    <h3>üìä Grade Distribution</h3>
                    <div class="grade-chart" id="grade-chart">
                        <!-- Chart will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Detailed Course Results -->
                <div class="detailed-results">
                    <h3>üìã Course Details</h3>
                    <div class="course-results-table" id="course-results-table">
                        <!-- Table will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- GPA Information Section -->
            <div class="info-section">
                <div class="info-tabs">
                    <button class="info-tab active" data-tab="grading">Grading Scale</button>
                    <button class="info-tab" data-tab="calculation">How It's Calculated</button>
                    <button class="info-tab" data-tab="tips">Academic Tips</button>
                    <button class="info-tab" data-tab="faq">FAQ</button>
                </div>

                <div class="info-content">
                    <!-- Grading Scale Tab -->
                    <div id="grading-tab" class="tab-content active">
                        <h3>Standard 4.0 Grading Scale</h3>
                        <div class="grading-scale-grid">
                            <div class="grade-item a-grade">
                                <div class="grade-letter">A+/A</div>
                                <div class="grade-points">4.0</div>
                                <div class="grade-range">90-100%</div>
                            </div>
                            <div class="grade-item a-minus">
                                <div class="grade-letter">A-</div>
                                <div class="grade-points">3.7</div>
                                <div class="grade-range">87-89%</div>
                            </div>
                            <div class="grade-item b-plus">
                                <div class="grade-letter">B+</div>
                                <div class="grade-points">3.3</div>
                                <div class="grade-range">83-86%</div>
                            </div>
                            <div class="grade-item b-grade">
                                <div class="grade-letter">B</div>
                                <div class="grade-points">3.0</div>
                                <div class="grade-range">80-82%</div>
                            </div>
                            <div class="grade-item b-minus">
                                <div class="grade-letter">B-</div>
                                <div class="grade-points">2.7</div>
                                <div class="grade-range">77-79%</div>
                            </div>
                            <div class="grade-item c-plus">
                                <div class="grade-letter">C+</div>
                                <div class="grade-points">2.3</div>
                                <div class="grade-range">73-76%</div>
                            </div>
                            <div class="grade-item c-grade">
                                <div class="grade-letter">C</div>
                                <div class="grade-points">2.0</div>
                                <div class="grade-range">70-72%</div>
                            </div>
                            <div class="grade-item below-c">
                                <div class="grade-letter">Below C</div>
                                <div class="grade-points">< 2.0</div>
                                <div class="grade-range">< 70%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Calculation Tab -->
                    <div id="calculation-tab" class="tab-content">
                        <h3>GPA Calculation Formula</h3>
                        <div class="formula-explanation">
                            <div class="formula-box">
                                <div class="formula-title">Step-by-Step Calculation</div>
                                <div class="formula-steps">
                                    <div class="step">
                                        <div class="step-number">1</div>
                                        <div class="step-content">
                                            <strong>Calculate Quality Points for each course:</strong><br>
                                            Quality Points = Grade Points √ó Credit Hours
                                        </div>
                                    </div>
                                    <div class="step">
                                        <div class="step-number">2</div>
                                        <div class="step-content">
                                            <strong>Sum all Quality Points:</strong><br>
                                            Total Quality Points = Sum of all Quality Points
                                        </div>
                                    </div>
                                    <div class="step">
                                        <div class="step-number">3</div>
                                        <div class="step-content">
                                            <strong>Sum all Credit Hours:</strong><br>
                                            Total Credit Hours = Sum of all Credit Hours
                                        </div>
                                    </div>
                                    <div class="step">
                                        <div class="step-number">4</div>
                                        <div class="step-content">
                                            <strong>Calculate GPA:</strong><br>
                                            GPA = Total Quality Points √∑ Total Credit Hours
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="example-calculation">
                                <h4>Example Calculation:</h4>
                                <table class="example-table">
                                    <thead>
                                        <tr>
                                            <th>Course</th>
                                            <th>Grade</th>
                                            <th>Points</th>
                                            <th>Credits</th>
                                            <th>Quality Points</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Mathematics</td>
                                            <td>A</td>
                                            <td>4.0</td>
                                            <td>3</td>
                                            <td>12.0</td>
                                        </tr>
                                        <tr>
                                            <td>English</td>
                                            <td>B+</td>
                                            <td>3.3</td>
                                            <td>3</td>
                                            <td>9.9</td>
                                        </tr>
                                        <tr>
                                            <td>Science</td>
                                            <td>A-</td>
                                            <td>3.7</td>
                                            <td>4</td>
                                            <td>14.8</td>
                                        </tr>
                                        <tr class="total-row">
                                            <td colspan="3"><strong>Total:</strong></td>
                                            <td><strong>10</strong></td>
                                            <td><strong>36.7</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="final-calculation">
                                    <strong>GPA = 36.7 √∑ 10 = 3.67</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tips Tab -->
                    <div id="tips-tab" class="tab-content">
                        <h3>Academic Success Tips</h3>
                        <div class="tips-grid">
                            <div class="tip-card">
                                <div class="tip-icon">üìö</div>
                                <div class="tip-title">Study Strategies</div>
                                <div class="tip-content">Create a consistent study schedule, use active learning techniques, and form study groups with classmates.</div>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">‚è∞</div>
                                <div class="tip-title">Time Management</div>
                                <div class="tip-content">Use a planner, prioritize assignments, and break large projects into smaller manageable tasks.</div>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">üéØ</div>
                                <div class="tip-title">Goal Setting</div>
                                <div class="tip-content">Set realistic academic goals, track your progress, and celebrate achievements along the way.</div>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">üí°</div>
                                <div class="tip-title">Class Participation</div>
                                <div class="tip-content">Attend all classes, participate actively, ask questions, and build relationships with instructors.</div>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">üîÑ</div>
                                <div class="tip-title">Review Regularly</div>
                                <div class="tip-content">Review notes daily, create summaries, and test yourself frequently to reinforce learning.</div>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">ü§ù</div>
                                <div class="tip-title">Seek Help</div>
                                <div class="tip-content">Don't hesitate to ask for help from professors, tutors, or academic support services when needed.</div>
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Tab -->
                    <div id="faq-tab" class="tab-content">
                        <h3>Frequently Asked Questions</h3>
                        <div class="faq-list">
                            <div class="faq-item">
                                <div class="faq-question">What is a good GPA?</div>
                                <div class="faq-answer">Generally, a GPA of 3.0 or higher is considered good, 3.5+ is very good, and 3.8+ is excellent. However, this can vary by institution and field of study.</div>
                            </div>
                            <div class="faq-item">
                                <div class="faq-question">How do I raise my GPA?</div>
                                <div class="faq-answer">Focus on earning higher grades in future courses, retake courses if allowed, consider taking additional courses, and seek academic support when needed.</div>
                            </div>
                            <div class="faq-item">
                                <div class="faq-question">Do all schools use the same GPA scale?</div>
                                <div class="faq-answer">No, GPA scales can vary. Most use 4.0 scale, but some use 5.0 (weighted) or other scales. Always check your institution's specific grading policy.</div>
                            </div>
                            <div class="faq-item">
                                <div class="faq-question">How do credit hours affect GPA?</div>
                                <div class="faq-answer">Courses with more credit hours have a greater impact on your GPA. A 4-credit course affects your GPA more than a 1-credit course.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar -->
        <div class="right-sidebar">
            <!-- GPA Goals Widget -->
            <div class="sidebar-widget">
                <div class="widget-header">üéØ GPA Goals</div>
                <div class="widget-content">
                    <div class="goal-setter">
                        <label>Target GPA:</label>
                        <input type="number" id="target-gpa" class="goal-input" placeholder="3.5" step="0.01" min="0" max="4">
                        <div class="goal-progress" id="goal-progress" style="display: none;">
                            <div class="progress-text">Progress to Goal</div>
                            <div class="progress-bar-small">
                                <div class="progress-fill-small" id="goal-progress-fill"></div>
                            </div>
                            <div class="progress-percentage" id="goal-percentage">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick GPA Reference -->
            <div class="sidebar-widget">
                <div class="widget-header">üìä Quick Reference</div>
                <div class="widget-content">
                    <div class="gpa-reference">
                        <div class="ref-item">
                            <div class="ref-gpa">4.0</div>
                            <div class="ref-desc">Perfect GPA</div>
                        </div>
                        <div class="ref-item">
                            <div class="ref-gpa">3.7+</div>
                            <div class="ref-desc">Summa Cum Laude</div>
                        </div>
                        <div class="ref-item">
                            <div class="ref-gpa">3.5+</div>
                            <div class="ref-desc">Magna Cum Laude</div>
                        </div>
                        <div class="ref-item">
                            <div class="ref-gpa">3.3+</div>
                            <div class="ref-desc">Cum Laude</div>
                        </div>
                        <div class="ref-item">
                            <div class="ref-gpa">3.0+</div>
                            <div class="ref-desc">Good Standing</div>
                        </div>
                        <div class="ref-item">
                            <div class="ref-gpa">2.0+</div>
                            <div class="ref-desc">Academic Probation</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Academic Calculators -->
            <div class="sidebar-widget">
                <div class="widget-header">üéì Academic Tools</div>
                <div class="widget-content">
                    <div class="calculator-grid">
                        <div class="calc-column">
                            <a href="{% url 'calculators:gpa_calculator' %}" class="calc-link active">GPA Calculator</a>
                            <a href="#" class="calc-link">Grade Calculator</a>
                            <a href="#" class="calc-link">Credit Calculator</a>
                            <a href="#" class="calc-link">Graduation Calculator</a>
                            <a href="{% url 'calculators:age_calculator' %}" class="calc-link">Age Calculator</a>
                        </div>
                        <div class="calc-column">
                            <a href="#" class="calc-link">Final Grade</a>
                            <a href="#" class="calc-link">Semester GPA</a>
                            <a href="#" class="calc-link">Cumulative GPA</a>
                            <a href="#" class="calc-link">Study Time</a>
                            <a href="#" class="calc-link">More Academic Tools</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Export Options -->
            <div class="sidebar-widget">
                <div class="widget-header">üíæ Export Results</div>
                <div class="widget-content">
                    <div class="export-options">
                        <button class="export-btn" id="export-pdf">
                            <span class="export-icon">üìÑ</span>
                            Export to PDF
                        </button>
                        <button class="export-btn" id="export-excel">
                            <span class="export-icon">üìä</span>
                            Export to Excel
                        </button>
                        <button class="export-btn" id="print-results">
                            <span class="export-icon">üñ®Ô∏è</span>
                            Print Results
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* GPA Calculator Unique Styles */
.gpa-calculator-style {
    font-family: 'Segoe UI', Arial, sans-serif;
    font-size: 14px;
    line-height: 1.5;
    color: #2c3e50;
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    min-height: 100vh;
}

/* Breadcrumb */
.breadcrumb-nav {
    font-size: 12px;
    color: #7f8c8d;
    margin-bottom: 20px;
    padding: 10px 0;
}

.breadcrumb-nav a {
    color: #3498db;
    text-decoration: none;
    transition: color 0.3s ease;
}

.breadcrumb-nav a:hover {
    color: #2980b9;
    text-decoration: underline;
}

/* Academic Header */
.academic-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 15px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    position: relative;
    overflow: hidden;
}

.academic-header::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    transform: rotate(45deg);
}

.header-content {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
    position: relative;
    z-index: 1;
}

.academic-icon {
    font-size: 4rem;
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.main-title {
    font-size: 2.8rem;
    font-weight: 700;
    margin: 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.subtitle {
    font-size: 1.2rem;
    margin: 10px 0 0 0;
    opacity: 0.9;
}

.gpa-stats {
    display: flex;
    gap: 40px;
    position: relative;
    z-index: 1;
}

.stat-item {
    text-align: center;
    background: rgba(255, 255, 255, 0.15);
    padding: 15px 20px;
    border-radius: 10px;
    backdrop-filter: blur(10px);
}

.stat-value {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 5px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.stat-label {
    font-size: 0.9rem;
    opacity: 0.8;
}

/* Main Layout */
.main-layout {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: 30px;
}

.left-content {
    background: white;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
}

/* GPA Input Section */
.gpa-input-section {
    padding: 25px;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #ecf0f1;
}

.section-header h2 {
    color: #2c3e50;
    font-size: 1.5rem;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.semester-selector {
    display: flex;
    align-items: center;
    gap: 10px;
}

.semester-dropdown {
    padding: 8px 12px;
    border: 2px solid #bdc3c7;
    border-radius: 6px;
    font-size: 0.9rem;
    background: white;
    color: #2c3e50;
    transition: border-color 0.3s ease;
}

.semester-dropdown:focus {
    outline: none;
    border-color: #3498db;
}

/* Course Entry */
.course-entry-container {
    margin-bottom: 25px;
}

.course-headers {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr 80px;
    gap: 15px;
    padding: 12px 15px;
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
    border-radius: 8px 8px 0 0;
    font-weight: 600;
    font-size: 0.9rem;
}

.header-col {
    text-align: center;
}

#courses-container {
    border: 2px solid #ecf0f1;
    border-top: none;
    min-height: 200px;
    max-height: 400px;
    overflow-y: auto;
}

.course-row {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr 80px;
    gap: 15px;
    padding: 12px 15px;
    border-bottom: 1px solid #ecf0f1;
    align-items: center;
    transition: background-color 0.3s ease;
    animation: fadeInUp 0.3s ease;
}

.course-row:hover {
    background: #f8f9fa;
}

.course-input {
    border: 1px solid #bdc3c7;
    border-radius: 5px;
    padding: 8px 10px;
    font-size: 0.9rem;
    transition: border-color 0.3s ease;
    width: 100%;
}

.course-input:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
}

.grade-select {
    border: 1px solid #bdc3c7;
    border-radius: 5px;
    padding: 8px;
    font-size: 0.9rem;
    background: white;
    cursor: pointer;
    transition: border-color 0.3s ease;
}

.grade-select:focus {
    outline: none;
    border-color: #3498db;
}

.quality-points {
    text-align: center;
    font-weight: 600;
    color: #27ae60;
    background: #ecf0f1;
    padding: 8px;
    border-radius: 5px;
    font-size: 0.9rem;
}

.remove-course-btn {
    background: #e74c3c;
    color: white;
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    font-size: 1.2rem;
}

.remove-course-btn:hover {
    background: #c0392b;
    transform: scale(1.1);
}

/* Add Course Section */
.add-course-section {
    display: flex;
    gap: 15px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 0 0 8px 8px;
}

.add-course-btn, .load-sample-btn {
   background: linear-gradient(135deg, #27ae60, #2ecc71);
   color: white;
   border: none;
   border-radius: 8px;
   padding: 12px 20px;
   cursor: pointer;
   font-size: 0.95rem;
   font-weight: 600;
   display: flex;
   align-items: center;
   gap: 8px;
   transition: all 0.3s ease;
   box-shadow: 0 3px 10px rgba(46, 204, 113, 0.3);
}

.add-course-btn:hover, .load-sample-btn:hover {
   transform: translateY(-2px);
   box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
}

.load-sample-btn {
   background: linear-gradient(135deg, #9b59b6, #8e44ad);
   box-shadow: 0 3px 10px rgba(155, 89, 182, 0.3);
}

.load-sample-btn:hover {
   box-shadow: 0 5px 15px rgba(155, 89, 182, 0.4);
}

/* Calculate Section */
.calculate-section {
   padding: 25px;
   background: linear-gradient(135deg, #f8f9fa, #e9ecef);
   border-top: 1px solid #dee2e6;
}

.calculation-controls {
   display: flex;
   gap: 15px;
   justify-content: center;
   flex-wrap: wrap;
}

.calculate-gpa-btn {
   background: linear-gradient(135deg, #e74c3c, #c0392b);
   color: white;
   border: none;
   border-radius: 10px;
   padding: 15px 30px;
   cursor: pointer;
   font-size: 1.1rem;
   font-weight: 700;
   display: flex;
   align-items: center;
   gap: 10px;
   transition: all 0.3s ease;
   box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
   text-transform: uppercase;
   letter-spacing: 1px;
}

.calculate-gpa-btn:hover {
   transform: translateY(-3px);
   box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
}

.clear-all-btn, .save-btn {
   background: linear-gradient(135deg, #95a5a6, #7f8c8d);
   color: white;
   border: none;
   border-radius: 8px;
   padding: 12px 20px;
   cursor: pointer;
   font-size: 0.95rem;
   font-weight: 600;
   display: flex;
   align-items: center;
   gap: 8px;
   transition: all 0.3s ease;
}

.clear-all-btn:hover, .save-btn:hover {
   transform: translateY(-2px);
   background: linear-gradient(135deg, #7f8c8d, #6c7b7d);
}

/* Results Section */
.results-section {
   padding: 25px;
   background: linear-gradient(135deg, #ffffff, #f8f9fa);
   border-top: 3px solid #3498db;
   animation: slideInUp 0.5s ease;
}

.results-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 25px;
   padding-bottom: 15px;
   border-bottom: 2px solid #ecf0f1;
}

.results-header h2 {
   color: #2c3e50;
   font-size: 1.6rem;
   margin: 0;
   display: flex;
   align-items: center;
   gap: 10px;
}

.results-date {
   color: #7f8c8d;
   font-size: 0.9rem;
}

.results-grid {
   display: grid;
   grid-template-columns: 1fr 1fr 1fr;
   gap: 20px;
   margin-bottom: 30px;
}

/* Main GPA Card */
.main-gpa-card {
   background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
   color: white;
   padding: 25px;
   border-radius: 15px;
   text-align: center;
   box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
   position: relative;
   overflow: hidden;
}

.main-gpa-card::before {
   content: '';
   position: absolute;
   top: -50%;
   right: -50%;
   width: 200%;
   height: 200%;
   background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
   animation: rotate 20s linear infinite;
}

.gpa-display {
   position: relative;
   z-index: 1;
   margin-bottom: 20px;
}

.gpa-label {
   font-size: 1rem;
   opacity: 0.9;
   margin-bottom: 10px;
}

.gpa-value {
   font-size: 3.5rem;
   font-weight: 900;
   line-height: 1;
   text-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
}

.gpa-scale {
   font-size: 0.9rem;
   opacity: 0.8;
   margin-top: 5px;
}

.gpa-progress {
   position: relative;
   z-index: 1;
}

.progress-bar {
   background: rgba(255, 255, 255, 0.3);
   height: 8px;
   border-radius: 4px;
   overflow: hidden;
   margin-bottom: 10px;
}

.progress-fill {
   background: linear-gradient(90deg, #f39c12, #e67e22, #e74c3c);
   height: 100%;
   border-radius: 4px;
   transition: width 1s ease;
}

.progress-labels {
   display: flex;
   justify-content: space-between;
   font-size: 0.8rem;
   opacity: 0.8;
}

/* Academic Standing Card */
.academic-standing-card {
   background: white;
   padding: 25px;
   border-radius: 15px;
   text-align: center;
   box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
   border: 3px solid #ecf0f1;
}

.standing-header {
   font-size: 1.1rem;
   color: #7f8c8d;
   margin-bottom: 15px;
   font-weight: 600;
}

.standing-badge {
   display: inline-block;
   padding: 10px 20px;
   border-radius: 25px;
   font-size: 1.1rem;
   font-weight: 700;
   margin-bottom: 15px;
   text-transform: uppercase;
   letter-spacing: 1px;
}

.standing-description {
   font-size: 0.95rem;
   color: #7f8c8d;
   line-height: 1.5;
}

/* Stats Card */
.stats-card {
   background: white;
   padding: 25px;
   border-radius: 15px;
   box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
   border: 3px solid #ecf0f1;
}

.stat-row {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: 10px 0;
   border-bottom: 1px solid #ecf0f1;
}

.stat-row:last-child {
   border-bottom: none;
}

.stat-label {
   color: #7f8c8d;
   font-size: 0.9rem;
}

.stat-value {
   font-weight: 700;
   color: #2c3e50;
   font-size: 1rem;
}

/* Grade Distribution */
.grade-distribution-section {
   margin-bottom: 30px;
}

.grade-distribution-section h3 {
   color: #2c3e50;
   font-size: 1.3rem;
   margin-bottom: 20px;
   display: flex;
   align-items: center;
   gap: 10px;
}

.grade-chart {
   background: white;
   border-radius: 10px;
   padding: 20px;
   box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
}

.grade-bar {
   display: flex;
   align-items: center;
   margin-bottom: 12px;
   padding: 8px 0;
}

.grade-label {
   width: 40px;
   font-weight: 600;
   color: #2c3e50;
}

.bar-container {
   flex: 1;
   background: #ecf0f1;
   height: 20px;
   border-radius: 10px;
   margin: 0 15px;
   overflow: hidden;
}

.bar-fill {
   height: 100%;
   border-radius: 10px;
   transition: width 0.8s ease;
}

.grade-count {
   width: 60px;
   text-align: right;
   font-weight: 600;
   color: #7f8c8d;
}

/* Course Results Table */
.detailed-results h3 {
   color: #2c3e50;
   font-size: 1.3rem;
   margin-bottom: 20px;
   display: flex;
   align-items: center;
   gap: 10px;
}

.course-results-table {
   background: white;
   border-radius: 10px;
   overflow: hidden;
   box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
}

.results-table {
   width: 100%;
   border-collapse: collapse;
}

.results-table th {
   background: linear-gradient(135deg, #3498db, #2980b9);
   color: white;
   padding: 15px 12px;
   text-align: left;
   font-weight: 600;
   font-size: 0.9rem;
}

.results-table td {
   padding: 12px;
   border-bottom: 1px solid #ecf0f1;
   font-size: 0.9rem;
}

.results-table tr:hover {
   background: #f8f9fa;
}

/* Info Section */
.info-section {
   margin-top: 30px;
   background: white;
   border-radius: 15px;
   overflow: hidden;
   box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
}

.info-tabs {
   display: flex;
   background: #ecf0f1;
   border-bottom: 1px solid #bdc3c7;
}

.info-tab {
   flex: 1;
   background: none;
   border: none;
   padding: 15px 20px;
   cursor: pointer;
   font-size: 0.9rem;
   font-weight: 600;
   color: #7f8c8d;
   transition: all 0.3s ease;
   border-bottom: 3px solid transparent;
}

.info-tab:hover {
   background: #d5dbdb;
   color: #2c3e50;
}

.info-tab.active {
   background: white;
   color: #3498db;
   border-bottom-color: #3498db;
}

.info-content {
   padding: 25px;
}

.tab-content {
   display: none;
}

.tab-content.active {
   display: block;
   animation: fadeIn 0.3s ease;
}

.tab-content h3 {
   color: #2c3e50;
   font-size: 1.4rem;
   margin-bottom: 20px;
}

/* Grading Scale Grid */
.grading-scale-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
   gap: 15px;
   margin-top: 20px;
}

.grade-item {
   background: white;
   border: 2px solid #ecf0f1;
   border-radius: 10px;
   padding: 20px;
   text-align: center;
   transition: all 0.3s ease;
   box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.grade-item:hover {
   transform: translateY(-3px);
   box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
}

.grade-letter {
   font-size: 1.5rem;
   font-weight: 900;
   margin-bottom: 8px;
   color: #2c3e50;
}

.grade-points {
   font-size: 1.2rem;
   font-weight: 700;
   margin-bottom: 5px;
   color: #3498db;
}

.grade-range {
   font-size: 0.85rem;
   color: #7f8c8d;
}

/* Grade-specific colors */
.a-grade { border-color: #27ae60; }
.a-minus { border-color: #2ecc71; }
.b-plus { border-color: #f39c12; }
.b-grade { border-color: #e67e22; }
.b-minus { border-color: #d35400; }
.c-plus { border-color: #e74c3c; }
.c-grade { border-color: #c0392b; }
.below-c { border-color: #95a5a6; }

/* Formula Section */
.formula-explanation {
   margin-top: 20px;
}

.formula-box {
   background: linear-gradient(135deg, #f8f9fa, #e9ecef);
   border: 2px solid #dee2e6;
   border-radius: 10px;
   padding: 20px;
   margin-bottom: 25px;
}

.formula-title {
   font-size: 1.2rem;
   font-weight: 700;
   color: #2c3e50;
   margin-bottom: 15px;
   text-align: center;
}

.formula-steps {
   display: grid;
   gap: 15px;
}

.step {
   display: flex;
   align-items: flex-start;
   gap: 15px;
   padding: 15px;
   background: white;
   border-radius: 8px;
   box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.step-number {
   background: linear-gradient(135deg, #3498db, #2980b9);
   color: white;
   width: 30px;
   height: 30px;
   border-radius: 50%;
   display: flex;
   align-items: center;
   justify-content: center;
   font-weight: 700;
   flex-shrink: 0;
}

.step-content {
   flex: 1;
   line-height: 1.5;
}

.example-calculation {
   background: white;
   border: 2px solid #3498db;
   border-radius: 10px;
   padding: 20px;
}

.example-calculation h4 {
   color: #2c3e50;
   margin-bottom: 15px;
}

.example-table {
   width: 100%;
   border-collapse: collapse;
   margin-bottom: 15px;
}

.example-table th,
.example-table td {
   padding: 10px 12px;
   text-align: left;
   border: 1px solid #ecf0f1;
}

.example-table th {
   background: #f8f9fa;
   font-weight: 600;
   color: #2c3e50;
}

.total-row {
   background: #e8f4fd;
   font-weight: 600;
}

.final-calculation {
   text-align: center;
   font-size: 1.2rem;
   color: #e74c3c;
   padding: 15px;
   background: #fef9e7;
   border-radius: 8px;
   border: 2px solid #f39c12;
}

/* Tips Grid */
.tips-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
   gap: 20px;
   margin-top: 20px;
}

.tip-card {
   background: white;
   border: 2px solid #ecf0f1;
   border-radius: 12px;
   padding: 20px;
   transition: all 0.3s ease;
   box-shadow: 0 3px 15px rgba(0, 0, 0, 0.05);
}

.tip-card:hover {
   transform: translateY(-5px);
   box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
   border-color: #3498db;
}

.tip-icon {
   font-size: 2.5rem;
   margin-bottom: 15px;
   text-align: center;
}

.tip-title {
   font-size: 1.1rem;
   font-weight: 700;
   color: #2c3e50;
   margin-bottom: 10px;
   text-align: center;
}

.tip-content {
   color: #7f8c8d;
   line-height: 1.6;
   text-align: center;
   font-size: 0.95rem;
}

/* FAQ */
.faq-list {
   margin-top: 20px;
}

.faq-item {
   border: 1px solid #ecf0f1;
   border-radius: 8px;
   margin-bottom: 10px;
   overflow: hidden;
}

.faq-question {
   background: #f8f9fa;
   padding: 15px 20px;
   font-weight: 600;
   color: #2c3e50;
   cursor: pointer;
   transition: background-color 0.3s ease;
   display: flex;
   justify-content: space-between;
   align-items: center;
}

.faq-question:hover {
   background: #e9ecef;
}

.faq-question::after {
   content: '+';
   font-size: 1.2rem;
   font-weight: 700;
   color: #3498db;
   transition: transform 0.3s ease;
}

.faq-item.active .faq-question::after {
   transform: rotate(45deg);
}

.faq-answer {
   padding: 15px 20px;
   color: #7f8c8d;
   line-height: 1.6;
   display: none;
   border-top: 1px solid #ecf0f1;
}

.faq-item.active .faq-answer {
   display: block;
   animation: slideDown 0.3s ease;
}

/* Right Sidebar */
.right-sidebar {
   display: flex;
   flex-direction: column;
   gap: 20px;
}

.sidebar-widget {
   background: white;
   border-radius: 12px;
   overflow: hidden;
   box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
   border: 1px solid #ecf0f1;
}

.widget-header {
   background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
   color: white;
   padding: 15px 20px;
   font-weight: 700;
   font-size: 1rem;
   display: flex;
   align-items: center;
   gap: 8px;
}

.widget-content {
   padding: 20px;
}

/* GPA Goals */
.goal-setter {
   display: flex;
   flex-direction: column;
   gap: 15px;
}

.goal-input {
   padding: 10px 12px;
   border: 2px solid #bdc3c7;
   border-radius: 6px;
   font-size: 1rem;
   text-align: center;
   transition: border-color 0.3s ease;
}

.goal-input:focus {
   outline: none;
   border-color: #3498db;
}

.goal-progress {
   text-align: center;
}

.progress-text {
   font-size: 0.9rem;
   color: #7f8c8d;
   margin-bottom: 8px;
}

.progress-bar-small {
   background: #ecf0f1;
   height: 6px;
   border-radius: 3px;
   overflow: hidden;
   margin-bottom: 8px;
}

.progress-fill-small {
   background: linear-gradient(90deg, #27ae60, #2ecc71);
   height: 100%;
   border-radius: 3px;
   transition: width 0.5s ease;
}

.progress-percentage {
   font-size: 0.9rem;
   font-weight: 600;
   color: #27ae60;
}

/* Quick Reference */
.gpa-reference {
   display: flex;
   flex-direction: column;
   gap: 12px;
}

.ref-item {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: 10px 12px;
   background: #f8f9fa;
   border-radius: 6px;
   border-left: 4px solid #3498db;
}

.ref-gpa {
   font-weight: 700;
   color: #2c3e50;
}

.ref-desc {
   font-size: 0.85rem;
   color: #7f8c8d;
}

/* Calculator Grid */
.calculator-grid {
   display: grid;
   grid-template-columns: 1fr 1fr;
   gap: 15px;
   margin-bottom: 15px;
}

.calc-column {
   display: flex;
   flex-direction: column;
   gap: 8px;
}

.calc-link {
   color: #3498db;
   text-decoration: none;
   font-size: 0.85rem;
   padding: 6px 0;
   transition: color 0.3s ease;
}

.calc-link:hover {
   color: #2980b9;
   text-decoration: underline;
}

.calc-link.active {
   color: #e74c3c;
   font-weight: 600;
}

/* Export Options */
.export-options {
   display: flex;
   flex-direction: column;
   gap: 10px;
}

.export-btn {
   background: linear-gradient(135deg, #95a5a6, #7f8c8d);
   color: white;
   border: none;
   border-radius: 6px;
   padding: 10px 15px;
   cursor: pointer;
   font-size: 0.85rem;
   font-weight: 600;
   display: flex;
   align-items: center;
   gap: 8px;
   transition: all 0.3s ease;
   text-align: left;
}

.export-btn:hover {
   background: linear-gradient(135deg, #7f8c8d, #6c7b7d);
   transform: translateY(-1px);
}

/* Academic Standing Colors */
.standing-excellent { background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; }
.standing-good { background: linear-gradient(135deg, #3498db, #2980b9); color: white; }
.standing-satisfactory { background: linear-gradient(135deg, #f39c12, #e67e22); color: white; }
.standing-warning { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; }

/* Animations */
@keyframes fadeInUp {
   from {
       opacity: 0;
       transform: translateY(20px);
   }
   to {
       opacity: 1;
       transform: translateY(0);
   }
}

@keyframes slideInUp {
   from {
       opacity: 0;
       transform: translateY(30px);
   }
   to {
       opacity: 1;
       transform: translateY(0);
   }
}

@keyframes fadeIn {
   from { opacity: 0; }
   to { opacity: 1; }
}

@keyframes slideDown {
   from {
       opacity: 0;
       max-height: 0;
   }
   to {
       opacity: 1;
       max-height: 200px;
   }
}

@keyframes rotate {
   from { transform: rotate(0deg); }
   to { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 1200px) {
   .main-layout {
       grid-template-columns: 1fr;
   }
   
   .right-sidebar {
       grid-row: 2;
   }
}

@media (max-width: 768px) {
   .gpa-calculator-style {
       padding: 10px;
   }
   
   .academic-header {
       padding: 20px;
   }
   
   .header-content {
       flex-direction: column;
       text-align: center;
       gap: 15px;
   }
   
   .main-title {
       font-size: 2.2rem;
   }
   
   .gpa-stats {
       flex-direction: column;
       gap: 15px;
   }
   
   .course-headers,
   .course-row {
       grid-template-columns: 1fr;
       gap: 10px;
       text-align: left;
   }
   
   .course-headers {
       display: none;
   }
   
   .course-row {
       flex-direction: column;
       padding: 15px;
       border: 1px solid #ecf0f1;
       border-radius: 8px;
       margin-bottom: 10px;
   }
   
   .results-grid {
       grid-template-columns: 1fr;
   }
   
   .grading-scale-grid {
       grid-template-columns: repeat(2, 1fr);
   }
   
   .tips-grid {
       grid-template-columns: 1fr;
   }
   
   .calculator-grid {
       grid-template-columns: 1fr;
   }
}

@media (max-width: 480px) {
   .academic-icon {
       font-size: 3rem;
   }
   
   .main-title {
       font-size: 1.8rem;
   }
   
   .gpa-value {
       font-size: 2.5rem;
   }
   
   .grading-scale-grid {
       grid-template-columns: 1fr;
   }
   
   .calculation-controls {
       flex-direction: column;
   }
   
   .section-header {
       flex-direction: column;
       gap: 15px;
       text-align: center;
   }
}
</style>

<script>
// GPA Calculator Functionality
let courses = [];
let courseCounter = 0;

// Grade point mapping
const gradePoints = {
   'A+': 4.0, 'A': 4.0, 'A-': 3.7,
   'B+': 3.3, 'B': 3.0, 'B-': 2.7,
   'C+': 2.3, 'C': 2.0, 'C-': 1.7,
   'D+': 1.3, 'D': 1.0, 'F': 0.0
};

// Initialize GPA Calculator
document.addEventListener('DOMContentLoaded', function() {
   initializeGPACalculator();
});

function initializeGPACalculator() {
   // Add initial course rows
   for (let i = 0; i < 4; i++) {
       addCourseRow();
   }
   
   // Event listeners
   document.getElementById('add-course-btn').addEventListener('click', addCourseRow);
   document.getElementById('load-sample-btn').addEventListener('click', loadSampleData);
   document.getElementById('calculate-gpa-btn').addEventListener('click', calculateGPA);
   document.getElementById('clear-all-btn').addEventListener('click', clearAllCourses);
   document.getElementById('save-btn').addEventListener('click', saveGPAData);
   
   // Export buttons
   document.getElementById('export-pdf').addEventListener('click', () => exportResults('pdf'));
   document.getElementById('export-excel').addEventListener('click', () => exportResults('excel'));
   document.getElementById('print-results').addEventListener('click', () => window.print());
   
   // Info tabs
   setupInfoTabs();
   
   // FAQ functionality
   setupFAQ();
   
   // Target GPA functionality
   setupTargetGPA();
   
   // Set current date
   document.getElementById('results-date').textContent = new Date().toLocaleDateString('en-US', {
       weekday: 'long',
       year: 'numeric',
       month: 'long',
       day: 'numeric'
   });
}

function addCourseRow() {
   courseCounter++;
   const coursesContainer = document.getElementById('courses-container');
   
   const courseRow = document.createElement('div');
   courseRow.className = 'course-row';
   courseRow.dataset.courseId = courseCounter;
   
   courseRow.innerHTML = `
       <input type="text" class="course-input" placeholder="Course Name" data-field="subject">
       <select class="grade-select" data-field="grade">
           <option value="">Select Grade</option>
           <option value="A+">A+ (4.0)</option>
           <option value="A">A (4.0)</option>
           <option value="A-">A- (3.7)</option>
           <option value="B+">B+ (3.3)</option>
           <option value="B">B (3.0)</option>
           <option value="B-">B- (2.7)</option>
           <option value="C+">C+ (2.3)</option>
           <option value="C">C (2.0)</option>
           <option value="C-">C- (1.7)</option>
           <option value="D+">D+ (1.3)</option>
           <option value="D">D (1.0)</option>
           <option value="F">F (0.0)</option>
       </select>
       <input type="number" class="course-input" placeholder="Credit Hours" step="0.5" min="0.5" max="10" data-field="credits">
       <div class="quality-points" data-field="points">0.00</div>
       <button type="button" class="remove-course-btn" onclick="removeCourseRow(${courseCounter})">√ó</button>
   `;
   
   coursesContainer.appendChild(courseRow);
   
   // Add event listeners for real-time calculation
   const inputs = courseRow.querySelectorAll('.course-input, .grade-select');
   inputs.forEach(input => {
       input.addEventListener('input', () => updateQualityPoints(courseRow));
   });
}

function removeCourseRow(courseId) {
   const courseRow = document.querySelector(`[data-course-id="${courseId}"]`);
   if (courseRow) {
       courseRow.style.animation = 'fadeOut 0.3s ease';
       setTimeout(() => {
           courseRow.remove();
           updateRealTimeCalculation();
       }, 300);
   }
}

function updateQualityPoints(courseRow) {
   const gradeSelect = courseRow.querySelector('[data-field="grade"]');
   const creditsInput = courseRow.querySelector('[data-field="credits"]');
   const pointsDisplay = courseRow.querySelector('[data-field="points"]');
   
   const grade = gradeSelect.value;
   const credits = parseFloat(creditsInput.value) || 0;
   
   if (grade && credits > 0) {
       const points = gradePoints[grade] * credits;
       pointsDisplay.textContent = points.toFixed(2);
       pointsDisplay.style.color = getGradeColor(grade);
   } else {
       pointsDisplay.textContent = '0.00';
       pointsDisplay.style.color = '#7f8c8d';
   }
   
   updateRealTimeCalculation();
}

function getGradeColor(grade) {
   if (grade === 'A+' || grade === 'A') return '#27ae60';
   if (grade === 'A-' || grade === 'B+') return '#2ecc71';
   if (grade === 'B' || grade === 'B-') return '#f39c12';
   if (grade === 'C+' || grade === 'C') return '#e67e22';
   if (grade === 'C-' || grade === 'D+') return '#e74c3c';
   return '#c0392b';
}

function updateRealTimeCalculation() {
   // This function can be used for live GPA updates as user types
   // For now, we'll keep it simple and just update on calculate button click
}

function loadSampleData() {
   clearAllCourses();
   
   const sampleCourses = [
       { subject: 'Calculus I', grade: 'A', credits: 4 },
       { subject: 'English Composition', grade: 'B+', credits: 3 },
       { subject: 'General Chemistry', grade: 'A-', credits: 4 },
       { subject: 'Introduction to Psychology', grade: 'B', credits: 3 },
       { subject: 'World History', grade: 'A', credits: 3 }
   ];
   
   sampleCourses.forEach((course, index) => {
       if (index >= document.querySelectorAll('.course-row').length) {
           addCourseRow();
       }
       
       const courseRows = document.querySelectorAll('.course-row');
       const courseRow = courseRows[index];
       
       courseRow.querySelector('[data-field="subject"]').value = course.subject;
       courseRow.querySelector('[data-field="grade"]').value = course.grade;
       courseRow.querySelector('[data-field="credits"]').value = course.credits;
       
       updateQualityPoints(courseRow);
   });
   
   // Show success message
   showNotification('Sample data loaded successfully!', 'success');
}

function clearAllCourses() {
   const coursesContainer = document.getElementById('courses-container');
   coursesContainer.innerHTML = '';
   courseCounter = 0;
   
   // Add back initial rows
   for (let i = 0; i < 4; i++) {
       addCourseRow();
   }
   
   // Hide results
   document.getElementById('gpa-results-section').style.display = 'none';
}

function calculateGPA() {
   const courseRows = document.querySelectorAll('.course-row');
   const validCourses = [];
   
   courseRows.forEach(row => {
       const subject = row.querySelector('[data-field="subject"]').value.trim();
       const grade = row.querySelector('[data-field="grade"]').value;
       const credits = parseFloat(row.querySelector('[data-field="credits"]').value);
       
       if (subject && grade && credits > 0) {
           validCourses.push({
               subject: subject,
               grade: grade,
               credits: credits,
               points: gradePoints[grade],
               qualityPoints: gradePoints[grade] * credits
           });
       }
   });
   
   if (validCourses.length === 0) {
       showNotification('Please add at least one complete course.', 'error');
       return;
   }
   
   // Calculate GPA
   const totalCredits = validCourses.reduce((sum, course) => sum + course.credits, 0);
   const totalQualityPoints = validCourses.reduce((sum, course) => sum + course.qualityPoints, 0);
   const gpa = totalQualityPoints / totalCredits;
   
   // Display results
   displayGPAResults(gpa, totalCredits, totalQualityPoints, validCourses);
}

function displayGPAResults(gpa, totalCredits, totalQualityPoints, courses) {
   // Update main GPA display
   document.getElementById('main-gpa-value').textContent = gpa.toFixed(2);
   
   // Update progress bar
   const progressFill = document.getElementById('gpa-progress-fill');
   const progressPercentage = (gpa / 4.0) * 100;
   progressFill.style.width = progressPercentage + '%';
   
   // Update academic standing
   const standingInfo = getAcademicStanding(gpa);
   const standingBadge = document.getElementById('academic-standing');
   const standingDescription = document.getElementById('standing-description');
   
   standingBadge.textContent = standingInfo.standing;
   standingBadge.className = 'standing-badge ' + standingInfo.class;
   standingDescription.textContent = standingInfo.description;
   
   // Update statistics
   document.getElementById('total-credits').textContent = totalCredits.toFixed(1);
   document.getElementById('quality-points').textContent = totalQualityPoints.toFixed(2);
   document.getElementById('average-grade').textContent = getAverageGrade(gpa);
   document.getElementById('percentage').textContent = (gpa * 25).toFixed(1) + '%';
   
   // Update grade distribution
   updateGradeDistribution(courses);
   
   // Update course results table
   updateCourseResultsTable(courses);
   
   // Update target GPA progress
   updateTargetGPAProgress(gpa);
   
   // Show results section
   const resultsSection = document.getElementById('gpa-results-section');
   resultsSection.style.display = 'block';
   
   // Scroll to results
   setTimeout(() => {
       resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
   }, 100);
   
   // Show success notification
   showNotification(`GPA calculated successfully: ${gpa.toFixed(2)}`, 'success');
}

function getAcademicStanding(gpa) {
   if (gpa >= 3.7) {
       return {
           standing: 'Excellent',
           class: 'standing-excellent',
           description: 'Outstanding academic performance! You\'re in the top tier of students.'
       };
   } else if (gpa >= 3.0) {
       return {
           standing: 'Good',
           class: 'standing-good',
           description: 'Solid academic performance. You\'re meeting high academic standards.'
       };
   } else if (gpa >= 2.0) {
       return {
           standing: 'Satisfactory',
           class: 'standing-satisfactory',
           description: 'Acceptable performance. Consider strategies to improve your grades.'
       };
   } else {
       return {
           standing: 'Needs Improvement',
           class: 'standing-warning',
           description: 'Your GPA needs attention. Consider seeking academic support.'
       };
   }
}

function getAverageGrade(gpa) {
   if (gpa >= 3.85) return 'A';
   if (gpa >= 3.5) return 'A-';
   if (gpa >= 3.15) return 'B+';
   if (gpa >= 2.85) return 'B';
   if (gpa >= 2.5) return 'B-';
   if (gpa >= 2.15) return 'C+';
   if (gpa >= 1.85) return 'C';
   if (gpa >= 1.5) return 'C-';
   if (gpa >= 1.15) return 'D+';
   if (gpa >= 0.85) return 'D';
   return 'F';
}

function updateGradeDistribution(courses) {
   const gradeChart = document.getElementById('grade-chart');
   const gradeCounts = {};
   
   // Initialize grade counts
   Object.keys(gradePoints).forEach(grade => {
       gradeCounts[grade] = 0;
   });
   
   // Count grades
   courses.forEach(course => {
       gradeCounts[course.grade]++;
   });
   
   // Create chart
   let chartHTML = '';
   Object.entries(gradeCounts).forEach(([grade, count]) => {
       if (count > 0) {
           const percentage = (count / courses.length) * 100;
           const color = getGradeColor(grade);
           
           chartHTML += `
               <div class="grade-bar">
                   <div class="grade-label">${grade}</div>
                   <div class="bar-container">
                       <div class="bar-fill" style="width: ${percentage}%; background: ${color};"></div>
                   </div>
                   <div class="grade-count">${count} course${count !== 1 ? 's' : ''}</div>
               </div>
           `;
       }
   });
   
   gradeChart.innerHTML = chartHTML || '<p style="text-align: center; color: #7f8c8d;">No data to display</p>';
}

function updateCourseResultsTable(courses) {
   const tableContainer = document.getElementById('course-results-table');
   
   let tableHTML = `
       <table class="results-table">
           <thead>
               <tr>
                   <th>Course</th>
                   <th>Grade</th>
                   <th>Points</th>
                   <th>Credits</th>
                   <th>Quality Points</th>
               </tr>
           </thead>
           <tbody>
   `;
   
   courses.forEach(course => {
       tableHTML += `
           <tr>
               <td>${course.subject}</td>
               <td style="color: ${getGradeColor(course.grade)}; font-weight: 600;">${course.grade}</td>
               <td>${course.points.toFixed(1)}</td>
               <td>${course.credits.toFixed(1)}</td>
               <td>${course.qualityPoints.toFixed(2)}</td>
           </tr>
       `;
   });
   
   const totalCredits = courses.reduce((sum, course) => sum + course.credits, 0);
   const totalQualityPoints = courses.reduce((sum, course) => sum + course.qualityPoints, 0);
   
   tableHTML += `
           <tr style="background: #f8f9fa; font-weight: 600; border-top: 2px solid #dee2e6;">
               <td>Total</td>
               <td>-</td>
               <td>-</td>
               <td>${totalCredits.toFixed(1)}</td>
               <td>${totalQualityPoints.toFixed(2)}</td>
           </tr>
       </tbody>
   </table>
   `;
   
   tableContainer.innerHTML = tableHTML;
}

function updateTargetGPAProgress(currentGPA) {
   const targetInput = document.getElementById('target-gpa');
   const goalProgress = document.getElementById('goal-progress');
   const goalProgressFill = document.getElementById('goal-progress-fill');
   const goalPercentage = document.getElementById('goal-percentage');
   
   const targetGPA = parseFloat(targetInput.value);
   
   if (targetGPA && targetGPA > 0) {
       const progress = Math.min((currentGPA / targetGPA) * 100, 100);
       goalProgressFill.style.width = progress + '%';
       goalPercentage.textContent = Math.round(progress) + '%';
       goalProgress.style.display = 'block';
   } else {
       goalProgress.style.display = 'none';
   }
}

function setupInfoTabs() {
   const tabs = document.querySelectorAll('.info-tab');
   const contents = document.querySelectorAll('.tab-content');
   
   tabs.forEach(tab => {
       tab.addEventListener('click', () => {
           const targetTab = tab.dataset.tab;
           
           // Remove active class from all tabs and contents
           tabs.forEach(t => t.classList.remove('active'));
           contents.forEach(c => c.classList.remove('active'));
           
           // Add active class to clicked tab and corresponding content
           tab.classList.add('active');
           document.getElementById(targetTab + '-tab').classList.add('active');
       });
   });
}

function setupFAQ() {
   const faqQuestions = document.querySelectorAll('.faq-question');
   
   faqQuestions.forEach(question => {
       question.addEventListener('click', () => {
           const faqItem = question.parentElement;
           const isActive = faqItem.classList.contains('active');
           
           // Close all other FAQ items
           document.querySelectorAll('.faq-item').forEach(item => {
               item.classList.remove('active');
           });
           
           // Toggle current item
           if (!isActive) {
               faqItem.classList.add('active');
           }
       });
   });
}

function setupTargetGPA() {
   const targetInput = document.getElementById('target-gpa');
   
   targetInput.addEventListener('input', () => {
       const currentGPAElement = document.getElementById('main-gpa-value');
       const currentGPA = parseFloat(currentGPAElement.textContent) || 0;
       updateTargetGPAProgress(currentGPA);
   });
}

function saveGPAData() {
   const courseRows = document.querySelectorAll('.course-row');
   const courses = [];
   
   courseRows.forEach(row => {
       const subject = row.querySelector('[data-field="subject"]').value.trim();
       const grade = row.querySelector('[data-field="grade"]').value;
       const credits = parseFloat(row.querySelector('[data-field="credits"]').value);
       
       if (subject && grade && credits > 0) {
           courses.push({ subject, grade, credits });
       }
   });
   
   if (courses.length > 0) {
       const semester = document.getElementById('semester-select').value;
       const saveData = {
           semester: semester,
           courses: courses,
           timestamp: new Date().toISOString()
       };
       
       localStorage.setItem('gpa_calculator_data', JSON.stringify(saveData));
       showNotification('GPA data saved successfully!', 'success');
   } else {
       showNotification('No courses to save.', 'error');
   }
}

function exportResults(format) {
   const resultsSection = document.getElementById('gpa-results-section');
   
   if (resultsSection.style.display === 'none') {
       showNotification('Please calculate GPA first before exporting.', 'error');
       return;
   }
   
   if (format === 'pdf') {
       // In a real implementation, you'd use a library like jsPDF
       showNotification('PDF export feature coming soon!', 'info');
   } else if (format === 'excel') {
       // In a real implementation, you'd use a library like SheetJS
       showNotification('Excel export feature coming soon!', 'info');
   }
}

function showNotification(message, type) {
   // Create notification element
   const notification = document.createElement('div');
   notification.className = `notification notification-${type}`;
   notification.textContent = message;
   
   // Style the notification
   notification.style.cssText = `
       position: fixed;
       top: 20px;
       right: 20px;
       padding: 15px 20px;
       border-radius: 8px;
       color: white;
       font-weight: 600;
       z-index: 10000;
       animation: slideInRight 0.3s ease;
       max-width: 300px;
       box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
   `;
   
   // Set background color based on type
   switch (type) {
       case 'success':
           notification.style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';
           break;
       case 'error':
           notification.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
           break;
       case 'info':
           notification.style.background = 'linear-gradient(135deg, #3498db, #2980b9)';
           break;
       default:
           notification.style.background = 'linear-gradient(135deg, #95a5a6, #7f8c8d)';
   }
   
   // Add to page
   document.body.appendChild(notification);
   
   // Remove after 3 seconds
   setTimeout(() => {
       notification.style.animation = 'slideOutRight 0.3s ease';
       setTimeout(() => {
           if (notification.parentNode) {
               notification.parentNode.removeChild(notification);
           }
       }, 300);
   }, 3000);
}

// Add CSS animations for notifications
const notificationStyles = document.createElement('style');
notificationStyles.textContent = `
   @keyframes slideInRight {
       from {
           opacity: 0;
           transform: translateX(100%);
       }
       to {
           opacity: 1;
           transform: translateX(0);
       }
   }
   
   @keyframes slideOutRight {
       from {
           opacity: 1;
           transform: translateX(0);
       }
       to {
           opacity: 0;
           transform: translateX(100%);
       }
   }
   
   @keyframes fadeOut {
       from {
           opacity: 1;
           transform: scale(1);
       }
       to {
           opacity: 0;
           transform: scale(0.9);
       }
   }
`;
document.head.appendChild(notificationStyles);

// Keyboard shortcuts
document.addEventListener('keydown', function(event) {
   if (event.ctrlKey && event.key === 'Enter') {
       calculateGPA();
   }
   if (event.ctrlKey && event.key === 's') {
       event.preventDefault();
       saveGPAData();
   }
});

// Load saved data on page load
document.addEventListener('DOMContentLoaded', function() {
   const savedData = localStorage.getItem('gpa_calculator_data');
   if (savedData) {
       try {
           const data = JSON.parse(savedData);
           // Auto-load saved data could be implemented here
           console.log('Saved GPA data found:', data);
       } catch (e) {
           console.error('Error loading saved data:', e);
       }
   }
});
</script>
{% endblock %}