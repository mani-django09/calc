{% extends 'calculators/base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<style>
/* Calorie Calculator Specific Styles */
.calorie-calculator-page {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
}

.hero-banner {
    background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
    color: white;
    padding: 40px 0;
    text-align: center;
}

.hero-content h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.hero-subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    margin-bottom: 1.5rem;
}

.hero-features {
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
    margin-top: 20px;
}

.hero-feature {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.95rem;
}

.health-disclaimer {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
    padding: 20px;
    margin: 20px 0;
    color: #856404;
}

.health-disclaimer h4 {
    color: #856404;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.main-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
}

.calculator-section {
    background: white;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    border: 1px solid #e0e0e0;
    margin-bottom: 30px;
}

.section-title {
    font-size: 1.8rem;
    color: #ff6b6b;
    margin-bottom: 1.5rem;
    font-weight: 700;
}

.calculator-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
}

.form-section {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 10px;
    border: 1px solid #e9ecef;
}

.results-section {
    background: #fff;
    padding: 25px;
    border-radius: 10px;
    border: 2px solid #ff6b6b;
}

.form-group {
    margin-bottom: 20px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.form-label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: #333;
    font-size: 0.95rem;
}

.form-input, .form-select {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: white;
    box-sizing: border-box;
}

.form-input:focus, .form-select:focus {
    outline: none;
    border-color: #ff6b6b;
    box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
}

.calculate-btn {
    width: 100%;
    background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
    color: white;
    border: none;
    padding: 15px;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 10px;
}

.calculate-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
}

.calculate-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
}

.result-display {
    text-align: center;
    padding: 20px;
}

.result-value {
    font-size: 3rem;
    font-weight: 700;
    color: #ff6b6b;
    margin-bottom: 10px;
    line-height: 1;
}

.result-label {
    font-size: 1.1rem;
    color: #666;
    margin-bottom: 20px;
}

.result-breakdown {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
    text-align: left;
}

.result-breakdown h4 {
    color: #ff6b6b;
    margin-bottom: 15px;
    font-size: 1.1rem;
}

.result-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid #e9ecef;
}

.result-item:last-child {
    border-bottom: none;
}

.result-item .label {
    font-weight: 500;
    color: #555;
}

.result-item .value {
    font-weight: 600;
    color: #333;
}

.goal-section {
    margin-top: 30px;
    padding: 20px;
    background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
    border-radius: 10px;
}

.goal-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-top: 15px;
}

.goal-card {
    background: white;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.goal-card:hover {
    border-color: #ff6b6b;
    transform: translateY(-2px);
}

.goal-card .goal-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: #555;
    margin-bottom: 5px;
}

.goal-card .goal-calories {
    font-size: 1.3rem;
    font-weight: 700;
    color: #ff6b6b;
}

.tips-section {
    margin-top: 40px;
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.tips-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-top: 20px;
}

.tip-card {
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #28a745;
}

.tip-card h4 {
    color: #333;
    margin-bottom: 10px;
    font-size: 1rem;
}

.tip-card p {
    color: #666;
    font-size: 0.9rem;
    margin: 0;
}

.seo-content {
    margin-top: 40px;
    background: white;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.seo-content h2 {
    color: #ff6b6b;
    font-size: 1.8rem;
    margin-bottom: 20px;
}

.seo-content h3 {
    color: #333;
    font-size: 1.3rem;
    margin: 25px 0 15px 0;
}

.seo-content h4 {
    color: #555;
    font-size: 1.1rem;
    margin: 20px 0 10px 0;
}

.seo-content p {
    color: #666;
    line-height: 1.7;
    margin-bottom: 15px;
}

.seo-content ul {
    color: #666;
    padding-left: 20px;
    margin-bottom: 15px;
}

.seo-content li {
    margin-bottom: 8px;
}

.breadcrumb {
    background: none;
    padding: 20px 0 0 0;
    margin: 0;
    font-size: 0.9rem;
}

.breadcrumb-item + .breadcrumb-item::before {
    content: ">";
    color: #666;
}

.breadcrumb-item a {
    color: #ff6b6b;
    text-decoration: none;
}

.breadcrumb-item.active {
    color: #666;
}

/* Responsive Design */
@media (max-width: 1024px) {
    .calculator-grid {
        grid-template-columns: 1fr;
        gap: 30px;
    }
    
    .goal-cards {
        grid-template-columns: 1fr;
    }
    
    .tips-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .hero-content h1 {
        font-size: 1.8rem;
    }
    
    .hero-features {
        gap: 15px;
    }
    
    .hero-feature {
        font-size: 0.85rem;
    }
    
    .main-container {
        padding: 20px 10px;
    }
    
    .calculator-section,
    .tips-section,
    .seo-content {
        padding: 20px;
    }
    
    .result-value {
        font-size: 2.5rem;
    }
    
    .form-row {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .hero-content h1 {
        font-size: 1.5rem;
    }
    
    .hero-features {
        flex-direction: column;
        gap: 10px;
    }
    
    .result-value {
        font-size: 2rem;
    }
}
</style>

<div class="calorie-calculator-page">
    <!-- Breadcrumb -->
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'calculators:home' %}">Home</a></li>
                <li class="breadcrumb-item"><a href="{% url 'calculators:home' %}">Calculators</a></li>
                <li class="breadcrumb-item active">Calorie Calculator</li>
            </ol>
        </nav>
    </div>

    <!-- Hero Banner -->
    <section class="hero-banner">
        <div class="container">
            <div class="hero-content">
                <h1>Free Calorie Calculator - Calculate Daily Calorie Needs</h1>
                <p class="hero-subtitle">
                    Calculate your daily calorie requirements based on age, gender, height, weight, and activity level. Get personalized recommendations for healthy weight management.
                </p>
                <div class="hero-features">
                    <div class="hero-feature">
                        <i class="fas fa-calculator"></i>
                        <span>BMR & TDEE Calculation</span>
                    </div>
                    <div class="hero-feature">
                        <i class="fas fa-target"></i>
                        <span>Weight Goals</span>
                    </div>
                    <div class="hero-feature">
                        <i class="fas fa-chart-line"></i>
                        <span>Activity Levels</span>
                    </div>
                    <div class="hero-feature">
                        <i class="fas fa-mobile-alt"></i>
                        <span>Mobile Friendly</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Health Disclaimer -->
    <div class="container">
        <div class="health-disclaimer">
            <h4><i class="fas fa-exclamation-triangle"></i> Important Health Disclaimer</h4>
            <p>This calculator provides estimates for educational purposes only. Calorie needs vary based on individual factors including metabolism, medical conditions, and genetics. For personalized nutrition advice, weight management plans, or if you have health concerns, consult with a healthcare provider, registered dietitian, or nutrition professional. Do not use extreme calorie restrictions without medical supervision.</p>
        </div>
    </div>

    <!-- Main Calculator -->
    <div class="container">
        <div class="main-container">
            <div class="calculator-section">
                <h2 class="section-title">Daily Calorie Needs Calculator</h2>
                <div class="calculator-grid">
                    <div class="form-section">
                        <form id="calorie-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="age" class="form-label">Age</label>
                                    <input type="number" id="age" class="form-input" placeholder="25" min="1" max="120" required>
                                    <small class="text-muted">Years</small>
                                </div>
                                <div class="form-group">
                                    <label for="gender" class="form-label">Gender</label>
                                    <select id="gender" class="form-select" required>
                                        <option value="">Select Gender</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="height" class="form-label">Height (cm)</label>
                                    <input type="number" id="height" class="form-input" placeholder="170" min="100" max="250" step="0.1" required>
                                    <small class="text-muted">Centimeters</small>
                                </div>
                                <div class="form-group">
                                    <label for="weight" class="form-label">Weight (kg)</label>
                                    <input type="number" id="weight" class="form-input" placeholder="70" min="20" max="300" step="0.1" required>
                                    <small class="text-muted">Kilograms</small>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="activity_level" class="form-label">Activity Level</label>
                                <select id="activity_level" class="form-select" required>
                                    <option value="">Select Activity Level</option>
                                    <option value="1.2">Sedentary (little/no exercise)</option>
                                    <option value="1.375">Lightly active (light exercise 1-3 days/week)</option>
                                    <option value="1.55">Moderately active (moderate exercise 3-5 days/week)</option>
                                    <option value="1.725">Very active (hard exercise 6-7 days/week)</option>
                                    <option value="1.9">Extremely active (very hard exercise, physical job)</option>
                                </select>
                                <small class="text-muted">Choose the option that best describes your lifestyle</small>
                            </div>

                            <button type="button" class="calculate-btn" onclick="calculateCalories()">
                                <i class="fas fa-calculator"></i> Calculate Daily Calories
                            </button>
                        </form>
                    </div>

                    <div class="results-section">
                        <div class="result-display" id="calorie-result">
                            <div class="result-value">0</div>
                            <div class="result-label">Daily Calories (TDEE)</div>
                            <p style="color: #666; font-size: 0.9rem;">Enter your information to calculate</p>
                        </div>
                    </div>
                </div>

                <!-- Weight Goals Section -->
                <div class="goal-section" id="goal-section" style="display: none;">
                    <h3>Calorie Goals for Weight Management</h3>
                    <p style="color: #666; margin-bottom: 0;">Safe and sustainable weight changes typically range from 0.5-1 kg per week</p>
                    <div class="goal-cards" id="goal-cards">
                        <!-- Goals will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Tips Section -->
            <div class="tips-section">
                <h2 class="section-title">Healthy Calorie Management Tips</h2>
                <div class="tips-grid">
                    <div class="tip-card">
                        <h4>Focus on Nutrition Quality</h4>
                        <p>Choose nutrient-dense foods that provide vitamins, minerals, and fiber. Quality matters as much as quantity for overall health.</p>
                    </div>
                    <div class="tip-card">
                        <h4>Listen to Your Body</h4>
                        <p>Pay attention to hunger and fullness cues. Calorie calculators provide estimates, but your body's signals are important guides.</p>
                    </div>
                    <div class="tip-card">
                        <h4>Stay Hydrated</h4>
                        <p>Drink plenty of water throughout the day. Sometimes thirst can be mistaken for hunger, affecting calorie intake.</p>
                    </div>
                    <div class="tip-card">
                        <h4>Include Regular Exercise</h4>
                        <p>Combine cardiovascular exercise with strength training for optimal health and metabolism support.</p>
                    </div>
                    <div class="tip-card">
                        <h4>Eat Regular Meals</h4>
                        <p>Maintain consistent meal timing to support stable energy levels and healthy metabolism throughout the day.</p>
                    </div>
                    <div class="tip-card">
                        <h4>Seek Professional Guidance</h4>
                        <p>For significant weight changes or health concerns, work with healthcare providers and registered dietitians.</p>
                    </div>
                </div>
            </div>

            <!-- SEO Content Section -->
            <div class="seo-content">
                <h2>Complete Guide to Calorie Calculation and Healthy Weight Management</h2>
                
                <h3>Understanding Daily Calorie Requirements</h3>
                <p>Your daily calorie needs depend on several factors including age, gender, height, weight, and activity level. Our calorie calculator uses scientifically validated formulas to estimate your Basal Metabolic Rate (BMR) and Total Daily Energy Expenditure (TDEE), providing personalized recommendations for maintaining, losing, or gaining weight in a healthy manner.</p>
                
                <h3>How the Calorie Calculator Works</h3>
                <p>Our calculator uses the Mifflin-St Jeor equation, which is considered one of the most accurate methods for estimating BMR in healthy individuals. This equation takes into account your biological sex, age, height, and weight to calculate your baseline metabolic rate.</p>
                
                <h4>BMR Calculation Formula</h4>
                <p>For men: BMR = (10 × weight in kg) + (6.25 × height in cm) - (5 × age in years) + 5</p>
                <p>For women: BMR = (10 × weight in kg) + (6.25 × height in cm) - (5 × age in years) - 161</p>
                
                <h4>TDEE Calculation</h4>
                <p>Your Total Daily Energy Expenditure is calculated by multiplying your BMR by an activity factor:</p>
                <ul>
                    <li><strong>Sedentary (1.2):</strong> Little to no exercise, desk job</li>
                    <li><strong>Lightly Active (1.375):</strong> Light exercise 1-3 days per week</li>
                    <li><strong>Moderately Active (1.55):</strong> Moderate exercise 3-5 days per week</li>
                    <li><strong>Very Active (1.725):</strong> Hard exercise 6-7 days per week</li>
                    <li><strong>Extremely Active (1.9):</strong> Very hard exercise, physical job, or training twice daily</li>
                </ul>
                
                <h3>Factors Affecting Calorie Needs</h3>
                
                <h4>Age and Metabolism</h4>
                <p>Metabolic rate generally decreases with age due to loss of muscle mass and changes in hormone levels. This is why calorie needs typically decrease as we get older, though maintaining muscle through strength training can help preserve metabolic rate.</p>
                
                <h4>Gender Differences</h4>
                <p>Men typically have higher calorie needs than women due to generally larger body size and higher muscle mass. Muscle tissue burns more calories at rest than fat tissue, contributing to higher metabolic rates.</p>
                
                <h4>Body Composition</h4>
                <p>Individuals with more muscle mass have higher metabolic rates because muscle tissue is metabolically active. This is why strength training is beneficial for long-term weight management.</p>
                
                <h4>Activity Level Impact</h4>
                <p>Physical activity significantly affects calorie needs. This includes both planned exercise and daily activities like walking, household chores, and occupational activities. Non-exercise activity thermogenesis (NEAT) can vary significantly between individuals.</p>
                
                <h3>Healthy Weight Management Principles</h3>
                
                <h4>Safe Rate of Weight Change</h4>
                <p>Health professionals recommend a weight loss or gain rate of 0.5-1 kg (1-2 pounds) per week for most people. This typically requires a calorie deficit or surplus of 500-1000 calories per day, as one pound of body fat contains approximately 3,500 calories.</p>
                
                <h4>Minimum Calorie Requirements</h4>
                <p>It's important never to go below minimum calorie requirements without medical supervision. Generally, this means no less than 1,200 calories per day for women and 1,500 calories per day for men. Very low-calorie diets can lead to nutrient deficiencies, muscle loss, and metabolic slowdown.</p>
                
                <h4>Quality vs. Quantity</h4>
                <p>While calories are important for weight management, the quality of those calories matters significantly for overall health. Focus on:</p>
                <ul>
                    <li>Nutrient-dense whole foods</li>
                    <li>Adequate protein for muscle maintenance</li>
                    <li>Healthy fats for hormone production and nutrient absorption</li>
                    <li>Complex carbohydrates for sustained energy</li>
                    <li>Plenty of fruits and vegetables for vitamins, minerals, and fiber</li>
                </ul>
                
                <h3>Common Calorie Calculation Scenarios</h3>
                
                <h4>Weight Loss Goals</h4>
                <p>For healthy weight loss, create a moderate calorie deficit of 500-750 calories per day through a combination of diet and exercise. This approach helps preserve muscle mass while promoting fat loss.</p>
                
                <h4>Weight Gain Goals</h4>
                <p>For healthy weight gain, create a calorie surplus of 300-500 calories per day, focusing on nutrient-dense foods and incorporating strength training to build muscle rather than just fat.</p>
                
                <h4>Weight Maintenance</h4>
                <p>To maintain current weight, consume calories equal to your TDEE while focusing on balanced nutrition and regular physical activity for overall health.</p>
                
                <h3>Special Considerations</h3>
                
                <h4>Pregnancy and Breastfeeding</h4>
                <p>Pregnant and breastfeeding women have increased calorie needs. Generally, an additional 300 calories per day during the second and third trimesters of pregnancy, and 500 calories per day while breastfeeding are recommended, though individual needs vary.</p>
                
                <h4>Athletes and Highly Active Individuals</h4>
                <p>Athletes may require significantly more calories than standard calculations suggest, sometimes 3,000-5,000+ calories per day depending on training volume and intensity. Professional guidance is recommended for athletic nutrition planning.</p>
                
                <h4>Older Adults</h4>
                <p>Older adults may need fewer calories due to decreased muscle mass and activity, but protein needs may be higher to prevent muscle loss. Focus on nutrient-dense foods to meet nutritional needs within lower calorie requirements.</p>
                
                <h4>Medical Conditions</h4>
                <p>Certain medical conditions can affect metabolism and calorie needs. Conditions like thyroid disorders, diabetes, and metabolic syndrome require medical supervision for nutrition planning.</p>
                
                <h3>Limitations of Calorie Calculators</h3>
                
                <h4>Individual Variation</h4>
                <p>Calorie calculators provide estimates based on population averages. Individual metabolic rates can vary by 15-20% or more due to genetics, medical history, and other factors.</p>
                
                <h4>Metabolic Adaptation</h4>
                <p>During prolonged calorie restriction, the body may adapt by reducing metabolic rate. This is why sustainable, moderate approaches to weight management are generally more effective long-term.</p>
                
                <h4>Accuracy of Activity Levels</h4>
                <p>Many people overestimate their activity level or underestimate calorie intake. Using fitness trackers and food diaries can provide more accurate assessments.</p>
                
                <h3>Beyond Calories: Holistic Health Approach</h3>
                
                <h4>Sleep Quality</h4>
                <p>Adequate sleep (7-9 hours for most adults) is crucial for healthy metabolism and weight management. Poor sleep can affect hormones that regulate hunger and satiety.</p>
                
                <h4>Stress Management</h4>
                <p>Chronic stress can affect eating patterns and metabolism. Incorporating stress management techniques supports overall health and weight management goals.</p>
                
                <h4>Hydration</h4>
                <p>Proper hydration supports metabolism and can help with appetite regulation. Sometimes thirst is mistaken for hunger, leading to unnecessary calorie consumption.</p>
                
                <h4>Meal Timing and Frequency</h4>
                <p>While total calories matter most for weight management, meal timing and frequency can affect hunger, energy levels, and adherence to nutrition goals.</p>
                
                <h3>When to Seek Professional Help</h3>
                <p>Consider consulting healthcare providers or registered dietitians if you:</p>
                <ul>
                    <li>Have a history of eating disorders</li>
                    <li>Need to lose or gain significant amounts of weight</li>
                    <li>Have medical conditions affecting metabolism</li>
                    <li>Are pregnant, breastfeeding, or planning pregnancy</li>
                    <li>Are an athlete with specific performance goals</li>
                    <li>Experience concerning symptoms related to eating or weight</li>
                </ul>
                
                <h3>Conclusion</h3>
                <p>Calorie calculators are valuable tools for understanding your energy needs and planning healthy weight management strategies. However, they should be used as part of a holistic approach that includes attention to food quality, physical activity, sleep, stress management, and overall well-being. Remember that sustainable, moderate changes are more effective than extreme approaches, and individual needs can vary significantly from calculated estimates.</p>
                
                <p>Always prioritize your overall health and well-being over specific calorie targets, and seek professional guidance when needed to ensure your approach to nutrition and weight management is safe and appropriate for your individual circumstances.</p>
            </div>
        </div>
    </div>
</div>

<script>
function calculateCalories() {
    const age = parseInt(document.getElementById('age').value);
    const gender = document.getElementById('gender').value;
    const height = parseFloat(document.getElementById('height').value);
    const weight = parseFloat(document.getElementById('weight').value);
    const activityLevel = parseFloat(document.getElementById('activity_level').value);
    
    // Validation
    if (!age || !gender || !height || !weight || !activityLevel) {
        document.getElementById('calorie-result').innerHTML = `
            <div class="result-value">Error</div>
            <div class="result-label">Please fill in all fields</div>
        `;
        return;
    }
    
    if (age < 1 || age > 120) {
        alert('Please enter a valid age between 1 and 120 years.');
        return;
    }
    
    if (height < 100 || height > 250) {
        alert('Please enter a valid height between 100 and 250 cm.');
        return;
    }
    
    if (weight < 20 || weight > 300) {
        alert('Please enter a valid weight between 20 and 300 kg.');
        return;
    }
    
    // Calculate BMR using Mifflin-St Jeor Equation
    let bmr;
    if (gender === 'male') {
        bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
    } else {
        bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
    }
    
    // Calculate TDEE
    const tdee = bmr * activityLevel;
    
    // Calculate BMI for additional info
    const heightM = height / 100;
    const bmi = weight / (heightM * heightM);
    
    // Display results
    document.getElementById('calorie-result').innerHTML = `
        <div class="result-value">${Math.round(tdee)}</div>
        <div class="result-label">Daily Calories (TDEE)</div>
        <div class="result-breakdown">
            <h4>Metabolic Breakdown</h4>
            <div class="result-item">
                <span class="label">Basal Metabolic Rate (BMR):</span>
                <span class="value">${Math.round(bmr)} calories</span>
            </div>
            <div class="result-item">
                <span class="label">Activity Factor:</span>
                <span class="value">${activityLevel}x</span>
            </div>
            <div class="result-item">
                <span class="label">BMI:</span>
                <span class="value">${bmi.toFixed(1)} kg/m²</span>
            </div>
            <div class="result-item">
                <span class="label">Height:</span>
                <span class="value">${height} cm</span>
            </div>
            <div class="result-item">
                <span class="label">Weight:</span>
                <span class="value">${weight} kg</span>
            </div>
        </div>
    `;
    
    // Show and populate weight goals
    showWeightGoals(tdee);
}

function showWeightGoals(tdee) {
    const goalSection = document.getElementById('goal-section');
    const goalCards = document.getElementById('goal-cards');
    
    // Calculate goal calories (safe ranges)
    const maintainCalories = Math.round(tdee);
    const mildDeficit = Math.round(tdee - 250); // 0.25 kg/week loss
    const moderateDeficit = Math.round(tdee - 500); // 0.5 kg/week loss
    const mildSurplus = Math.round(tdee + 250); // 0.25 kg/week gain
    const moderateSurplus = Math.round(tdee + 500); // 0.5 kg/week gain
    
    goalCards.innerHTML = `
        <div class="goal-card">
            <div class="goal-title">Mild Weight Loss</div>
            <div class="goal-calories">${mildDeficit}</div>
            <small style="color: #666;">0.25 kg/week</small>
        </div>
        <div class="goal-card">
            <div class="goal-title">Moderate Weight Loss</div>
            <div class="goal-calories">${moderateDeficit}</div>
            <small style="color: #666;">0.5 kg/week</small>
        </div>
        <div class="goal-card">
            <div class="goal-title">Maintain Weight</div>
            <div class="goal-calories">${maintainCalories}</div>
            <small style="color: #666;">Current weight</small>
        </div>
        <div class="goal-card">
            <div class="goal-title">Mild Weight Gain</div>
            <div class="goal-calories">${mildSurplus}</div>
            <small style="color: #666;">0.25 kg/week</small>
        </div>
        <div class="goal-card">
            <div class="goal-title">Moderate Weight Gain</div>
            <div class="goal-calories">${moderateSurplus}</div>
            <small style="color: #666;">0.5 kg/week</small>
        </div>
    `;
    
    goalSection.style.display = 'block';
}

// Add event listeners for real-time validation
document.addEventListener('DOMContentLoaded', function() {
    const inputs = ['age', 'height', 'weight'];
    inputs.forEach(id => {
        document.getElementById(id).addEventListener('input', function() {
            // Basic validation
            const value = parseFloat(this.value);
            if (id === 'age' && (value < 1 || value > 120)) {
                this.style.borderColor = '#dc3545';
            } else if (id === 'height' && (value < 100 || value > 250)) {
                this.style.borderColor = '#dc3545';
            } else if (id === 'weight' && (value < 20 || value > 300)) {
                this.style.borderColor = '#dc3545';
            } else {
                this.style.borderColor = '#e0e0e0';
            }
        });
    });
    
    // Auto-calculate when all fields are filled
    const form = document.getElementById('calorie-form');
    form.addEventListener('change', function() {
        const age = document.getElementById('age').value;
        const gender = document.getElementById('gender').value;
        const height = document.getElementById('height').value;
        const weight = document.getElementById('weight').value;
        const activityLevel = document.getElementById('activity_level').value;
        
        if (age && gender && height && weight && activityLevel) {
            calculateCalories();
        }
    });
});
</script>

<!-- Schema.org structured data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Calorie Calculator",
  "description": "Free calorie calculator to calculate daily calorie needs based on age, gender, height, weight, and activity level. Get personalized recommendations for healthy weight management.",
  "url": "{{ request.build_absolute_uri }}",
  "applicationCategory": "HealthApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "provider": {
    "@type": "Organization",
    "name": "myCalculator.us",
    "url": "{% url 'calculators:home' %}"
  },
  "featureList": [
    "Calculate BMR and TDEE",
    "Weight management goals",
    "Activity level adjustments",
    "Personalized calorie recommendations",
    "Health-focused approach",
    "Mobile-friendly interface"
  ]
}
</script>
{% endblock %}