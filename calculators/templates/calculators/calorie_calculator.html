{% extends 'calculators/base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<style>
/* Calorie Calculator Styles - Blue Theme */
.calorie-calculator-page {
    font-family: Arial, sans-serif;
    font-size: 14px;
    line-height: 1.5;
    color: #333;
    background: white;
}

.breadcrumb-nav {
    font-size: 12px;
    color: #666;
    margin: 0;
    padding: 10px 20px 8px 20px;
    background: #f9f9f9;
    max-width: 1200px;
    margin: 0 auto;
}

.breadcrumb-nav a {
    color: #0066cc;
    text-decoration: none;
}

.breadcrumb-nav a:hover {
    text-decoration: underline;
}

.hero-banner {
    background: linear-gradient(135deg, #2c5282 0%, #2b6cb0 100%);
    color: white;
    padding: 15px 20px;
    margin: 0;
    border-bottom: 2px solid #1a4971;
}

.hero-content {
    max-width: 1200px;
    margin: 0 auto;
}

.hero-content h1 {
    font-size: 24px;
    font-weight: normal;
    margin: 0 0 6px 0;
    color: white;
}

.hero-subtitle {
    font-size: 14px;
    opacity: 0.93;
    margin: 0 0 8px 0;
    line-height: 1.4;
    max-width: 800px;
}

.hero-features {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    font-size: 13px;
}

.hero-feature {
    display: flex;
    align-items: center;
    gap: 5px;
}

.hero-feature i {
    font-size: 12px;
}

.content-wrapper {
    max-width: 1200px;
    margin: 0 auto;
    padding: 15px 20px;
}

.main-layout {
    display: flex;
    gap: 20px;
}

.left-content {
    flex: 1;
    max-width: 800px;
}

.right-sidebar {
    width: 280px;
    flex-shrink: 0;
}

.health-disclaimer {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 4px;
    padding: 15px;
    margin-bottom: 15px;
    font-size: 12px;
    color: #856404;
}

.health-disclaimer h4 {
    color: #856404;
    margin: 0 0 8px 0;
    font-size: 13px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
}

.health-disclaimer p {
    margin: 0;
    line-height: 1.5;
}

.instruction-banner {
    background: #3182ce;
    color: white;
    padding: 8px 15px;
    margin-bottom: 15px;
    border-radius: 4px;
    font-size: 12px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.calculator-form {
    background: #ebf4ff;
    border: 1px solid #bee3f8;
    margin-bottom: 20px;
}

.form-table {
    width: 100%;
    border-collapse: collapse;
}

.form-table td {
    padding: 12px 15px;
    border-bottom: 1px solid #bee3f8;
    vertical-align: middle;
}

.form-table tr:last-child td {
    border-bottom: none;
}

.label-cell {
    background: #fff;
    font-weight: normal;
    width: 200px;
    color: #333;
    font-size: 13px;
}

.input-cell {
    background: white;
}

.button-cell {
    background: white;
    text-align: center;
    padding: 15px;
}

.form-input, .form-select {
    padding: 6px 8px;
    border: 1px solid #ccc;
    font-size: 13px;
    background: white;
    box-sizing: border-box;
    border-radius: 3px;
}

.form-input {
    width: 120px;
}

.form-select {
    width: 250px;
}

.form-input:focus, .form-select:focus {
    outline: none;
    border-color: #3182ce;
}

.input-hint {
    display: block;
    font-size: 11px;
    color: #666;
    margin-top: 3px;
}

.calculate-button {
    background: #2c5282;
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    transition: background 0.2s;
}

.calculate-button:hover:not(:disabled) {
    background: #1a4971;
}

.calculate-button:disabled {
    background: #ccc;
    cursor: not-allowed;
}

/* Results Section */
.results-container {
    background: white;
    border: 1px solid #bee3f8;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 4px;
}

.results-container h3 {
    margin: 0 0 15px 0;
    font-size: 16px;
    font-weight: normal;
    color: #2c5282;
}

.calorie-highlight {
    text-align: center;
    padding: 25px;
    background: linear-gradient(135deg, #ebf4ff 0%, #dbeafe 100%);
    border: 2px solid #3182ce;
    border-radius: 8px;
    margin-bottom: 20px;
}

.calorie-label {
    font-size: 12px;
    color: #666;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.calorie-value {
    font-size: 36px;
    font-weight: bold;
    color: #2c5282;
    margin-bottom: 5px;
}

.calorie-subtitle {
    font-size: 13px;
    color: #666;
}

.results-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-bottom: 20px;
}

.result-card {
    padding: 15px;
    background: #fff;
    border: 1px solid #bee3f8;
    border-radius: 3px;
}

.result-label {
    font-size: 11px;
    color: #666;
    margin-bottom: 5px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.result-value {
    font-size: 20px;
    font-weight: bold;
    color: #2c5282;
    margin-bottom: 3px;
}

.result-subtitle {
    font-size: 11px;
    color: #666;
}

/* Breakdown Section */
.breakdown-section {
    margin-top: 20px;
    padding: 15px;
    background: #f7fafc;
    border-radius: 4px;
    border-left: 4px solid #3182ce;
}

.breakdown-section h4 {
    font-size: 14px;
    font-weight: normal;
    color: #2c5282;
    margin: 0 0 12px 0;
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid #e2e8f0;
    font-size: 13px;
}

.breakdown-item:last-child {
    border-bottom: none;
}

.breakdown-label {
    color: #666;
}

.breakdown-value {
    font-weight: 600;
    color: #2c5282;
}

/* Goal Cards */
.goal-section {
    margin-top: 20px;
    padding: 20px;
    background: #f7fafc;
    border-radius: 4px;
    border: 1px solid #bee3f8;
}

.goal-section h4 {
    font-size: 14px;
    font-weight: normal;
    color: #2c5282;
    margin: 0 0 8px 0;
}

.goal-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 12px;
}

.goal-card {
    background: white;
    padding: 15px;
    border-radius: 4px;
    text-align: center;
    border: 1px solid #bee3f8;
    transition: all 0.2s;
}

.goal-card:hover {
    border-color: #3182ce;
    box-shadow: 0 2px 8px rgba(44, 82, 130, 0.15);
}

.goal-title {
    font-size: 12px;
    color: #666;
    margin-bottom: 8px;
    font-weight: 600;
}

.goal-calories {
    font-size: 20px;
    font-weight: bold;
    color: #2c5282;
    margin-bottom: 3px;
}

.goal-note {
    font-size: 11px;
    color: #999;
}

/* Empty State */
.empty-results {
    text-align: center;
    padding: 40px 20px;
    color: #666;
}

.empty-results i {
    font-size: 3rem;
    color: #bee3f8;
    margin-bottom: 15px;
    display: block;
}

/* Tips Section */
.tips-section {
    margin-top: 30px;
    padding: 20px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.tips-section h3 {
    font-size: 16px;
    font-weight: normal;
    color: #333;
    margin-bottom: 15px;
}

.tips-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.tip-card {
    padding: 12px;
    background: #f9f9f9;
    border-radius: 3px;
    border-left: 3px solid #3182ce;
    font-size: 12px;
}

.tip-card h4 {
    color: #2c5282;
    margin: 0 0 5px 0;
    font-size: 13px;
    font-weight: normal;
}

.tip-card p {
    color: #666;
    margin: 0;
    line-height: 1.4;
}

/* SEO Content */
.seo-content {
    margin-top: 30px;
    padding: 20px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.seo-content h2 {
    color: #2c5282;
    font-size: 18px;
    font-weight: normal;
    margin: 0 0 15px 0;
}

.seo-content h3 {
    color: #333;
    font-size: 15px;
    font-weight: normal;
    margin: 20px 0 10px 0;
}

.seo-content h4 {
    color: #555;
    font-size: 14px;
    font-weight: normal;
    margin: 15px 0 8px 0;
}

.seo-content p {
    color: #666;
    line-height: 1.6;
    margin-bottom: 12px;
    text-align: justify;
}

.seo-content ul {
    color: #666;
    padding-left: 20px;
    margin-bottom: 12px;
}

.seo-content li {
    margin-bottom: 6px;
    line-height: 1.5;
}

/* Sidebar */
.search-section {
    margin-bottom: 20px;
    display: flex;
    gap: 5px;
}

.search-input {
    flex: 1;
    padding: 6px 8px;
    border: 1px solid #ccc;
    font-size: 13px;
    border-radius: 2px;
}

.search-button {
    background: #2c5282;
    color: white;
    border: none;
    padding: 6px 12px;
    cursor: pointer;
    font-size: 13px;
    border-radius: 2px;
}

.sidebar-widget {
    border: 1px solid #ddd;
    margin-bottom: 20px;
    border-radius: 3px;
}

.widget-header {
    background: #2c5282;
    color: white;
    padding: 10px 15px;
    font-weight: normal;
    font-size: 14px;
}

.widget-content {
    padding: 15px;
}

.calculator-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.calc-column {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.calc-link {
    color: #0066cc;
    text-decoration: none;
    font-size: 13px;
    padding: 2px 0;
}

.calc-link:hover {
    text-decoration: underline;
}

/* Responsive Design */
@media (max-width: 768px) {
    .breadcrumb-nav {
        padding: 8px 15px 6px 15px;
        font-size: 11px;
    }
    
    .hero-banner {
        padding: 12px 15px;
    }
    
    .hero-content h1 {
        font-size: 18px;
        margin-bottom: 5px;
    }
    
    .hero-subtitle {
        font-size: 12px;
        margin-bottom: 6px;
    }
    
    .hero-features {
        gap: 10px;
        font-size: 11px;
    }
    
    .content-wrapper {
        padding: 12px 15px;
    }
    
    .main-layout {
        flex-direction: column;
    }
    
    .right-sidebar {
        width: 100%;
    }
    
    .label-cell {
        width: auto;
        display: block;
        padding: 10px 15px 5px;
        border-bottom: none;
    }
    
    .input-cell {
        display: block;
        padding: 5px 15px 10px;
    }
    
    .form-input,
    .form-select {
        width: 100%;
        max-width: 100%;
    }
    
    .results-grid {
        grid-template-columns: 1fr;
    }
    
    .goal-cards {
        grid-template-columns: 1fr;
    }
    
    .tips-grid {
        grid-template-columns: 1fr;
    }
    
    .calculator-grid {
        grid-template-columns: 1fr;
    }
    
    .calorie-value {
        font-size: 28px;
    }
}

@media (max-width: 480px) {
    .hero-content h1 {
        font-size: 16px;
    }
    
    .hero-features {
        flex-direction: column;
        gap: 6px;
    }
    
    .form-input,
    .form-select {
        font-size: 16px;
    }
}
</style>

<div class="calorie-calculator-page">
    <!-- Breadcrumb -->
    <div class="breadcrumb-nav">
        <a href="{% url 'calculators:home' %}">home</a> / 
        <a href="{% url 'calculators:home' %}">health</a> / 
        <span>calorie calculator</span>
    </div>

    <!-- Hero Banner -->
    <section class="hero-banner">
        <div class="hero-content">
            <h1>Calorie Calculator</h1>
            <p class="hero-subtitle">
                Calculate your daily calorie needs based on age, gender, height, weight, and activity level. Get personalized recommendations for healthy weight management.
            </p>
            <div class="hero-features">
                <div class="hero-feature">
                    <i class="fas fa-check-circle"></i>
                    <span>BMR & TDEE Calculator</span>
                </div>
                <div class="hero-feature">
                    <i class="fas fa-chart-line"></i>
                    <span>Activity Levels</span>
                </div>
                <div class="hero-feature">
                    <i class="fas fa-bullseye"></i>
                    <span>Weight Goals</span>
                </div>
                <div class="hero-feature">
                    <i class="fas fa-heart"></i>
                    <span>100% Free</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="content-wrapper">
        <div class="main-layout">
            <!-- Left Content -->
            <div class="left-content">
                <!-- Health Disclaimer -->
                <div class="health-disclaimer">
                    <h4><i class="fas fa-exclamation-triangle"></i> Important Health Disclaimer</h4>
                    <p>This calculator provides estimates for educational purposes only. Calorie needs vary based on individual factors. For personalized nutrition advice or medical concerns, consult with a healthcare provider or registered dietitian.</p>
                </div>

                <!-- Instruction Banner -->
                <div class="instruction-banner">
                    <span class="check-icon">✓</span>
                    Enter your information to calculate daily calorie needs
                </div>

                <!-- Calculator Form -->
                <div class="calculator-form">
                    <form id="calorie-form" method="post">
                        {% csrf_token %}
                        <table class="form-table">
                            <tr>
                                <td class="label-cell">Age</td>
                                <td class="input-cell">
                                    <input type="number" 
                                           id="age" 
                                           name="age" 
                                           class="form-input" 
                                           placeholder="25"
                                           min="1"
                                           max="120"
                                           required>
                                    <span class="input-hint">Years old</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="label-cell">Gender</td>
                                <td class="input-cell">
                                    <select id="gender" name="gender" class="form-select" required>
                                        <option value="">Select Gender</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                    </select>
                                    <span class="input-hint">Biological sex affects calorie calculation</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="label-cell">Height (cm)</td>
                                <td class="input-cell">
                                    <input type="number" 
                                           id="height" 
                                           name="height" 
                                           class="form-input" 
                                           placeholder="170"
                                           min="100"
                                           max="250"
                                           step="0.1"
                                           required>
                                    <span class="input-hint">Centimeters (1 inch = 2.54 cm)</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="label-cell">Weight (kg)</td>
                                <td class="input-cell">
                                    <input type="number" 
                                           id="weight" 
                                           name="weight" 
                                           class="form-input" 
                                           placeholder="70"
                                           min="20"
                                           max="300"
                                           step="0.1"
                                           required>
                                    <span class="input-hint">Kilograms (1 lb = 0.45 kg)</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="label-cell">Activity Level</td>
                                <td class="input-cell">
                                    <select id="activity_level" name="activity_level" class="form-select" required>
                                        <option value="">Select Activity Level</option>
                                        <option value="1.2">Sedentary - Little/no exercise</option>
                                        <option value="1.375">Lightly Active - Light exercise 1-3 days/week</option>
                                        <option value="1.55">Moderately Active - Moderate exercise 3-5 days/week</option>
                                        <option value="1.725">Very Active - Hard exercise 6-7 days/week</option>
                                        <option value="1.9">Extremely Active - Very hard exercise + physical job</option>
                                    </select>
                                    <span class="input-hint">Choose what best describes your lifestyle</span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" class="button-cell">
                                    <button type="button" class="calculate-button" onclick="calculateCalories()">
                                        <i class="fas fa-calculator"></i> Calculate Daily Calories
                                    </button>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>

                <!-- Results Section -->
                <div id="results-section" style="display: none;">
                    <div class="results-container">
                        <div id="results-content">
                            <!-- Results will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Tips Section -->
                <div class="tips-section">
                    <h3>Healthy Calorie Management Tips</h3>
                    <div class="tips-grid">
                        <div class="tip-card">
                            <h4>Focus on Nutrition Quality</h4>
                            <p>Choose nutrient-dense foods that provide vitamins, minerals, and fiber. Quality matters as much as quantity for overall health and energy levels.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Listen to Your Body</h4>
                            <p>Pay attention to hunger and fullness cues. Calculators provide estimates, but your body's signals are important guides for healthy eating.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Stay Hydrated</h4>
                            <p>Drink plenty of water throughout the day. Thirst can sometimes be mistaken for hunger, affecting your calorie intake and energy.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Include Regular Exercise</h4>
                            <p>Combine cardiovascular exercise with strength training for optimal health and metabolism support. Movement is key for wellbeing.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Eat Regular Meals</h4>
                            <p>Maintain consistent meal timing to support stable energy levels and healthy metabolism throughout the day. Avoid extreme restrictions.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Seek Professional Guidance</h4>
                            <p>For significant weight changes or health concerns, work with healthcare providers and registered dietitians for personalized advice.</p>
                        </div>
                    </div>
                </div>

                <!-- SEO Content -->
                <div class="seo-content">
                    <h2>Complete Guide to Calorie Calculation and Healthy Weight Management</h2>
                    
                    <h3>Understanding Daily Calorie Requirements</h3>
                    <p>Your daily calorie needs depend on several factors including age, gender, height, weight, and activity level. Our calorie calculator uses scientifically validated formulas to estimate your Basal Metabolic Rate (BMR) and Total Daily Energy Expenditure (TDEE), providing personalized recommendations for maintaining, losing, or gaining weight in a healthy manner.</p>
                    
                    <h3>How the Calorie Calculator Works</h3>
                    <p>Our calculator uses the Mifflin-St Jeor equation, which is considered one of the most accurate methods for estimating BMR in healthy individuals. This equation takes into account your biological sex, age, height, and weight to calculate your baseline metabolic rate - the number of calories your body burns at rest.</p>
                    
                    <h4>BMR Calculation Formula</h4>
                    <p>For men: BMR = (10 × weight in kg) + (6.25 × height in cm) - (5 × age in years) + 5</p>
                    <p>For women: BMR = (10 × weight in kg) + (6.25 × height in cm) - (5 × age in years) - 161</p>
                    
                    <h4>TDEE Calculation</h4>
                    <p>Your Total Daily Energy Expenditure is calculated by multiplying your BMR by an activity factor that accounts for your typical physical activity level:</p>
                    <ul>
                        <li><strong>Sedentary (1.2):</strong> Little to no exercise, desk job</li>
                        <li><strong>Lightly Active (1.375):</strong> Light exercise 1-3 days per week</li>
                        <li><strong>Moderately Active (1.55):</strong> Moderate exercise 3-5 days per week</li>
                        <li><strong>Very Active (1.725):</strong> Hard exercise 6-7 days per week</li>
                        <li><strong>Extremely Active (1.9):</strong> Very hard exercise, physical job, or training twice daily</li>
                    </ul>
                    
                    <h3>Factors Affecting Calorie Needs</h3>
                    
                    <h4>Age and Metabolism</h4>
                    <p>Metabolic rate generally decreases with age due to loss of muscle mass and hormonal changes. This is why calorie needs typically decrease as we get older, though maintaining muscle through strength training can help preserve metabolic rate and overall health.</p>
                    
                    <h4>Gender Differences</h4>
                    <p>Men typically have higher calorie needs than women due to generally larger body size and higher muscle mass. Muscle tissue burns more calories at rest than fat tissue, contributing to higher metabolic rates.</p>
                    
                    <h4>Body Composition</h4>
                    <p>Individuals with more muscle mass have higher metabolic rates because muscle tissue is metabolically active. This is why strength training is beneficial for long-term weight management and overall health.</p>
                    
                    <h4>Activity Level Impact</h4>
                    <p>Physical activity significantly affects calorie needs. This includes both planned exercise and daily activities like walking, household chores, and occupational activities. Non-exercise activity thermogenesis (NEAT) can vary significantly between individuals.</p>
                    
                    <h3>Healthy Weight Management Principles</h3>
                    
                    <h4>Safe Rate of Weight Change</h4>
                    <p>Health professionals recommend a weight loss or gain rate of 0.5-1 kg (1-2 pounds) per week for most people. This typically requires a calorie deficit or surplus of 500-750 calories per day. Gradual changes are more sustainable and healthier than extreme approaches.</p>
                    
                    <h4>Minimum Calorie Requirements</h4>
                    <p>It's important never to go below minimum calorie requirements without medical supervision. Generally, this means no less than 1,200 calories per day for women and 1,500 calories per day for men. Very low-calorie approaches can lead to nutrient deficiencies and other health concerns.</p>
                    
                    <h4>Quality vs. Quantity</h4>
                    <p>While calories are important for weight management, the quality of those calories matters significantly for overall health. Focus on nutrient-dense whole foods, adequate protein, healthy fats, complex carbohydrates, and plenty of fruits and vegetables.</p>
                    
                    <h3>Common Calorie Calculation Scenarios</h3>
                    
                    <h4>Weight Loss Goals</h4>
                    <p>For healthy weight loss, create a moderate calorie deficit of 500-750 calories per day through a combination of mindful eating and physical activity. This approach helps preserve muscle mass while promoting gradual, sustainable changes.</p>
                    
                    <h4>Weight Gain Goals</h4>
                    <p>For healthy weight gain, create a calorie surplus of 300-500 calories per day, focusing on nutrient-dense foods and incorporating strength training to build muscle in a healthy way.</p>
                    
                    <h4>Weight Maintenance</h4>
                    <p>To maintain current weight, consume calories equal to your TDEE while focusing on balanced nutrition and regular physical activity for overall health and wellbeing.</p>
                    
                    <h3>Special Considerations</h3>
                    
                    <h4>Athletes and Highly Active Individuals</h4>
                    <p>Athletes may require significantly more calories than standard calculations suggest, depending on training volume and intensity. Professional guidance is recommended for athletic nutrition planning.</p>
                    
                    <h4>Older Adults</h4>
                    <p>Older adults may need fewer calories due to decreased muscle mass and activity, but protein needs may be higher to help maintain muscle. Focus on nutrient-dense foods to meet nutritional needs.</p>
                    
                    <h4>Medical Conditions</h4>
                    <p>Certain medical conditions can affect metabolism and calorie needs. Conditions like thyroid disorders, diabetes, and metabolic conditions require medical supervision for nutrition planning.</p>
                    
                    <h3>Limitations of Calorie Calculators</h3>
                    
                    <h4>Individual Variation</h4>
                    <p>Calorie calculators provide estimates based on population averages. Individual metabolic rates can vary by 15-20% or more due to genetics, medical history, and other factors not captured by standard formulas.</p>
                    
                    <h4>Metabolic Adaptation</h4>
                    <p>During prolonged calorie restriction, the body may adapt by reducing metabolic rate. This is why sustainable, moderate approaches to weight management are generally more effective long-term than extreme restrictions.</p>
                    
                    <h4>Accuracy of Activity Levels</h4>
                    <p>Many people overestimate their activity level. Being honest about your actual daily movement patterns leads to more accurate calorie estimates.</p>
                    
                    <h3>Beyond Calories: Holistic Health Approach</h3>
                    
                    <h4>Sleep Quality</h4>
                    <p>Adequate sleep (7-9 hours for most adults) is crucial for healthy metabolism and weight management. Poor sleep can affect hormones that regulate hunger and satiety.</p>
                    
                    <h4>Stress Management</h4>
                    <p>Chronic stress can affect eating patterns and metabolism. Incorporating stress management techniques supports overall health and weight management goals.</p>
                    
                    <h4>Hydration</h4>
                    <p>Proper hydration supports metabolism and can help with appetite regulation. Sometimes thirst is mistaken for hunger, leading to unnecessary calorie consumption.</p>
                    
                    <h4>Meal Timing and Frequency</h4>
                    <p>While total calories matter most for weight management, meal timing and frequency can affect hunger, energy levels, and adherence to nutrition goals.</p>
                    
                    <h3>When to Seek Professional Help</h3>
                    <p>Consider consulting healthcare providers or registered dietitians if you have medical conditions affecting metabolism, need to make significant weight changes, are pregnant or breastfeeding, are an athlete with specific performance goals, or have concerns about your relationship with food.</p>
                    
                    <h3>Conclusion</h3>
                    <p>Calorie calculators are valuable tools for understanding your energy needs and planning healthy weight management strategies. However, they should be used as part of a holistic approach that includes attention to food quality, physical activity, sleep, stress management, and overall wellbeing. Remember that sustainable, moderate changes are more effective than extreme approaches, and individual needs can vary significantly from calculated estimates.</p>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="right-sidebar">
                <!-- Search Box -->
                <div class="search-section">
                    <input type="text" class="search-input" placeholder="Search...">
                    <button class="search-button">Search</button>
                </div>

                <!-- Related Calculators -->
                <div class="sidebar-widget">
                    <div class="widget-header">Related Calculators</div>
                    <div class="widget-content">
                        <div class="calculator-grid">
                            <div class="calc-column">
                                <a href="{% url 'calculators:bmi_calculator' %}" class="calc-link">BMI Calculator</a>
                                <a href="{% url 'calculators:bmr_calculator' %}" class="calc-link">BMR Calculator</a>
                                <a href="{% url 'calculators:age_calculator' %}" class="calc-link">Age Calculator</a>
                            </div>
                            <div class="calc-column">
                                <a href="{% url 'calculators:loan_calculator' %}" class="calc-link">Loan Calculator</a>
                                <a href="{% url 'calculators:gpa_calculator' %}" class="calc-link">GPA Calculator</a>
                                <a href="{% url 'calculators:home' %}" class="calc-link">More Tools</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activity Level Guide -->
                <div class="sidebar-widget">
                    <div class="widget-header">Activity Level Guide</div>
                    <div class="widget-content">
                        <div style="font-size: 12px; color: #666; line-height: 1.5;">
                            <p style="margin-bottom: 10px;"><strong>Sedentary:</strong> Desk job, little exercise, mostly sitting or lying down.</p>
                            <p style="margin-bottom: 10px;"><strong>Lightly Active:</strong> Light exercise 1-3 days/week, some walking daily.</p>
                            <p style="margin-bottom: 10px;"><strong>Moderately Active:</strong> Moderate exercise 3-5 days/week, regular movement.</p>
                            <p style="margin-bottom: 10px;"><strong>Very Active:</strong> Hard exercise 6-7 days/week or physical job.</p>
                            <p style="margin: 0;"><strong>Extremely Active:</strong> Very hard daily exercise + physical job or training 2x/day.</p>
                        </div>
                    </div>
                </div>

                <!-- BMI Categories -->
                <div class="sidebar-widget">
                    <div class="widget-header">BMI Categories</div>
                    <div class="widget-content">
                        <table style="width: 100%; font-size: 12px; border-collapse: collapse;">
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 6px 0; font-weight: 600;">Underweight</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">&lt; 18.5</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 6px 0; font-weight: 600;">Normal</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">18.5 - 24.9</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 6px 0; font-weight: 600;">Overweight</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">25.0 - 29.9</td>
                            </tr>
                            <tr>
                                <td style="padding: 6px 0; font-weight: 600;">Obese</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">&gt; 30.0</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function calculateCalories() {
    const age = parseInt(document.getElementById('age').value);
    const gender = document.getElementById('gender').value;
    const height = parseFloat(document.getElementById('height').value);
    const weight = parseFloat(document.getElementById('weight').value);
    const activityLevel = parseFloat(document.getElementById('activity_level').value);
    
    // Validation
    if (!age || !gender || !height || !weight || !activityLevel) {
        alert('Please fill in all fields.');
        return;
    }
    
    if (age < 1 || age > 120) {
        alert('Please enter a valid age between 1 and 120 years.');
        return;
    }
    
    if (height < 100 || height > 250) {
        alert('Please enter a valid height between 100 and 250 cm.');
        return;
    }
    
    if (weight < 20 || weight > 300) {
        alert('Please enter a valid weight between 20 and 300 kg.');
        return;
    }
    
    // Calculate BMR using Mifflin-St Jeor Equation
    let bmr;
    if (gender === 'male') {
        bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
    } else {
        bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
    }
    
    // Calculate TDEE
    const tdee = bmr * activityLevel;
    
    // Calculate BMI
    const heightM = height / 100;
    const bmi = weight / (heightM * heightM);
    
    // Get activity level text
    const activityText = {
        '1.2': 'Sedentary',
        '1.375': 'Lightly Active',
        '1.55': 'Moderately Active',
        '1.725': 'Very Active',
        '1.9': 'Extremely Active'
    }[activityLevel];
    
    // Display results
    document.getElementById('results-content').innerHTML = `
        <div class="calorie-highlight">
            <div class="calorie-label">Your Daily Calorie Needs</div>
            <div class="calorie-value">${Math.round(tdee)}</div>
            <div class="calorie-subtitle">Total Daily Energy Expenditure (TDEE)</div>
        </div>

        <div class="results-grid">
            <div class="result-card">
                <div class="result-label">Basal Metabolic Rate</div>
                <div class="result-value">${Math.round(bmr)}</div>
                <div class="result-subtitle">Calories at rest</div>
            </div>
            <div class="result-card">
                <div class="result-label">Activity Level</div>
                <div class="result-value">${activityLevel}x</div>
                <div class="result-subtitle">${activityText}</div>
            </div>
            <div class="result-card">
                <div class="result-label">Body Mass Index</div>
                <div class="result-value">${bmi.toFixed(1)}</div>
                <div class="result-subtitle">kg/m²</div>
            </div>
            <div class="result-card">
                <div class="result-label">Weekly BMR</div>
                <div class="result-value">${Math.round(bmr * 7)}</div>
                <div class="result-subtitle">Calories per week</div>
            </div>
        </div>

        <div class="breakdown-section">
            <h4>Your Information</h4>
            <div class="breakdown-item">
                <span class="breakdown-label">Age</span>
                <span class="breakdown-value">${age} years</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Gender</span>
                <span class="breakdown-value">${gender.charAt(0).toUpperCase() + gender.slice(1)}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Height</span>
                <span class="breakdown-value">${height} cm</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Weight</span>
                <span class="breakdown-value">${weight} kg</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Activity Level</span>
                <span class="breakdown-value">${activityText}</span>
            </div>
        </div>

        <div class="goal-section">
            <h4>Calorie Goals for Weight Management</h4>
            <p style="font-size: 12px; color: #666; margin-bottom: 12px;">Safe weight changes: 0.5-1 kg per week</p>
            <div class="goal-cards">
                <div class="goal-card">
                    <div class="goal-title">Mild Weight Loss</div>
                    <div class="goal-calories">${Math.round(tdee - 250)}</div>
                    <div class="goal-note">-250 cal/day<br>~0.25 kg/week</div>
                </div>
                <div class="goal-card">
                    <div class="goal-title">Moderate Weight Loss</div>
                    <div class="goal-calories">${Math.round(tdee - 500)}</div>
                    <div class="goal-note">-500 cal/day<br>~0.5 kg/week</div>
                </div>
                <div class="goal-card">
                    <div class="goal-title">Maintain Weight</div>
                    <div class="goal-calories">${Math.round(tdee)}</div>
                    <div class="goal-note">Current TDEE<br>Maintain</div>
                </div>
                <div class="goal-card">
                    <div class="goal-title">Mild Weight Gain</div>
                    <div class="goal-calories">${Math.round(tdee + 250)}</div>
                    <div class="goal-note">+250 cal/day<br>~0.25 kg/week</div>
                </div>
                <div class="goal-card">
                    <div class="goal-title">Moderate Weight Gain</div>
                    <div class="goal-calories">${Math.round(tdee + 500)}</div>
                    <div class="goal-note">+500 cal/day<br>~0.5 kg/week</div>
                </div>
            </div>
        </div>
    `;
    
    // Show results section
    document.getElementById('results-section').style.display = 'block';
    
    // Scroll to results
    setTimeout(() => {
        const resultsSection = document.getElementById('results-section');
        const rect = resultsSection.getBoundingClientRect();
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const targetPosition = rect.top + scrollTop - 100;
        
        window.scrollTo({ top: targetPosition, behavior: 'smooth' });
        
        resultsSection.style.transition = 'box-shadow 0.5s ease';
        resultsSection.style.boxShadow = '0 0 30px rgba(44, 82, 130, 0.6)';
        
        setTimeout(() => {
            resultsSection.style.boxShadow = '0 0 15px rgba(44, 82, 130, 0.3)';
            setTimeout(() => {
                resultsSection.style.boxShadow = 'none';
            }, 1500);
        }, 600);
    }, 100);
}

// Add event listeners for real-time validation
document.addEventListener('DOMContentLoaded', function() {
    const inputs = ['age', 'height', 'weight'];
    inputs.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
            input.addEventListener('input', function() {
                const value = parseFloat(this.value);
                if (id === 'age' && (value < 1 || value > 120)) {
                    this.style.borderColor = '#dc3545';
                } else if (id === 'height' && (value < 100 || value > 250)) {
                    this.style.borderColor = '#dc3545';
                } else if (id === 'weight' && (value < 20 || value > 300)) {
                    this.style.borderColor = '#dc3545';
                } else {
                    this.style.borderColor = '#ccc';
                }
            });
        }
    });
});
</script>

<!-- Schema.org structured data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Calorie Calculator",
  "alternateName": ["Daily Calorie Calculator", "TDEE Calculator", "BMR Calculator", "Calorie Needs Calculator"],
  "description": "Free calorie calculator to calculate daily calorie needs based on age, gender, height, weight, and activity level. Get personalized recommendations for healthy weight management with BMR and TDEE calculations.",
  "url": "{{ request.build_absolute_uri }}",
  "applicationCategory": "HealthApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "provider": {
    "@type": "Organization",
    "name": "myCalculator.us",
    "url": "{% url 'calculators:home' %}"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "5623"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I calculate my daily calorie needs?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Enter your age, gender, height, weight, and activity level into our calorie calculator. It uses the Mifflin-St Jeor equation to calculate your BMR (Basal Metabolic Rate) and then multiplies it by your activity factor to determine your TDEE (Total Daily Energy Expenditure) - the total calories you burn per day."
      }
    },
    {
      "@type": "Question",
      "name": "What is the difference between BMR and TDEE?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "BMR (Basal Metabolic Rate) is the number of calories your body burns at complete rest just to maintain basic functions like breathing and circulation. TDEE (Total Daily Energy Expenditure) is your BMR multiplied by an activity factor - it represents the total calories you burn in a day including all activities and exercise."
      }
    },
    {
      "@type": "Question",
      "name": "How many calories should I eat to lose weight?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "For healthy weight loss, create a calorie deficit of 500-750 calories per day below your TDEE. This typically results in losing 0.5-1 kg (1-2 pounds) per week, which is considered safe and sustainable. Never go below 1,200 calories for women or 1,500 for men without medical supervision."
      }
    },
    {
      "@type": "Question",
      "name": "Which activity level should I choose?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Choose Sedentary if you have a desk job with little exercise. Lightly Active if you exercise 1-3 days/week. Moderately Active for 3-5 days/week of exercise. Very Active for 6-7 days/week of hard exercise. Extremely Active if you do very hard exercise daily plus have a physical job. Most people overestimate their activity level - when in doubt, choose the lower option."
      }
    },
    {
      "@type": "Question",
      "name": "How accurate are calorie calculators?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Calorie calculators provide estimates based on scientific formulas and population averages. Individual metabolic rates can vary by 15-20% or more due to genetics, medical conditions, and other factors. Use the calculator as a starting point and adjust based on your actual results over time. For personalized advice, consult a healthcare provider or registered dietitian."
      }
    }
  ]
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ request.scheme }}://{{ request.get_host }}{% url 'calculators:home' %}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Health Calculators",
      "item": "{{ request.scheme }}://{{ request.get_host }}{% url 'calculators:home' %}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Calorie Calculator",
      "item": "{{ request.build_absolute_uri }}"
    }
  ]
}
</script>

{% endblock %}