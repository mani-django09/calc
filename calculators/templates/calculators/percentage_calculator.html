{% extends 'calculators/base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<style>
/* Percentage Calculator Styles - Blue Theme */
.percentage-calculator-page {
    font-family: Arial, sans-serif;
    font-size: 14px;
    line-height: 1.5;
    color: #333;
    background: white;
}

.breadcrumb-nav {
    font-size: 12px;
    color: #666;
    margin: 0;
    padding: 10px 20px 8px 20px;
    background: #f9f9f9;
    max-width: 1200px;
    margin: 0 auto;
}

.breadcrumb-nav a {
    color: #0066cc;
    text-decoration: none;
}

.breadcrumb-nav a:hover {
    text-decoration: underline;
}

.hero-banner {
    background: linear-gradient(135deg, #2c5282 0%, #2b6cb0 100%);
    color: white;
    padding: 15px 20px;
    margin: 0;
    border-bottom: 2px solid #1a4971;
}

.hero-content {
    max-width: 1200px;
    margin: 0 auto;
}

.hero-content h1 {
    font-size: 24px;
    font-weight: normal;
    margin: 0 0 6px 0;
    color: white;
}

.hero-subtitle {
    font-size: 14px;
    opacity: 0.93;
    margin: 0 0 8px 0;
    line-height: 1.4;
    max-width: 800px;
}

.hero-features {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    font-size: 13px;
}

.hero-feature {
    display: flex;
    align-items: center;
    gap: 5px;
}

.hero-feature i {
    font-size: 12px;
}

.content-wrapper {
    max-width: 1200px;
    margin: 0 auto;
    padding: 15px 20px;
}

.main-layout {
    display: flex;
    gap: 20px;
}

.left-content {
    flex: 1;
    max-width: 800px;
}

.right-sidebar {
    width: 280px;
    flex-shrink: 0;
}

/* Calculator Tabs */
.calc-mode-tabs {
    display: flex;
    gap: 5px;
    margin-bottom: 0;
    border-bottom: 2px solid #e5e7eb;
}

.mode-tab {
    padding: 10px 15px;
    background: white;
    border: none;
    color: #666;
    cursor: pointer;
    font-size: 13px;
    border-bottom: 3px solid transparent;
    transition: all 0.2s;
    white-space: nowrap;
}

.mode-tab:hover {
    color: #2c5282;
}

.mode-tab.active {
    color: #2c5282;
    border-bottom-color: #2c5282;
    font-weight: 600;
}

.instruction-banner {
    background: #3182ce;
    color: white;
    padding: 8px 15px;
    margin-bottom: 15px;
    border-radius: 4px;
    font-size: 12px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.calculator-form {
    background: #ebf4ff;
    border: 1px solid #bee3f8;
    margin-bottom: 20px;
}

.form-table {
    width: 100%;
    border-collapse: collapse;
}

.form-table td {
    padding: 12px 15px;
    border-bottom: 1px solid #bee3f8;
    vertical-align: middle;
}

.form-table tr:last-child td {
    border-bottom: none;
}

.label-cell {
    background: #fff;
    font-weight: normal;
    width: 200px;
    color: #333;
    font-size: 13px;
}

.input-cell {
    background: white;
}

.button-cell {
    background: white;
    text-align: center;
    padding: 15px;
}

.form-input {
    padding: 6px 8px;
    border: 1px solid #ccc;
    font-size: 13px;
    background: white;
    box-sizing: border-box;
    border-radius: 3px;
    width: 150px;
}

.form-input:focus {
    outline: none;
    border-color: #3182ce;
}

.input-hint {
    display: block;
    font-size: 11px;
    color: #666;
    margin-top: 3px;
}

.calculate-button {
    background: #2c5282;
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    transition: background 0.2s;
}

.calculate-button:hover:not(:disabled) {
    background: #1a4971;
}

.calculate-button:disabled {
    background: #ccc;
    cursor: not-allowed;
}

.form-section {
    display: none;
}

.form-section.active {
    display: block;
}

/* Results Section */
.results-container {
    background: white;
    border: 1px solid #bee3f8;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 4px;
}

.results-container h3 {
    margin: 0 0 15px 0;
    font-size: 16px;
    font-weight: normal;
    color: #2c5282;
}

.result-highlight {
    text-align: center;
    padding: 25px;
    background: linear-gradient(135deg, #ebf4ff 0%, #dbeafe 100%);
    border: 2px solid #3182ce;
    border-radius: 8px;
    margin-bottom: 20px;
}

.result-label {
    font-size: 12px;
    color: #666;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.result-value {
    font-size: 36px;
    font-weight: bold;
    color: #2c5282;
    margin-bottom: 5px;
}

.result-subtitle {
    font-size: 13px;
    color: #666;
}

.breakdown-section {
    margin-top: 20px;
    padding: 15px;
    background: #f7fafc;
    border-radius: 4px;
    border-left: 4px solid #3182ce;
}

.breakdown-section h4 {
    font-size: 14px;
    font-weight: normal;
    color: #2c5282;
    margin: 0 0 12px 0;
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid #e2e8f0;
    font-size: 13px;
}

.breakdown-item:last-child {
    border-bottom: none;
}

.breakdown-label {
    color: #666;
}

.breakdown-value {
    font-weight: 600;
    color: #2c5282;
}

/* Empty State */
.empty-results {
    text-align: center;
    padding: 40px 20px;
    color: #666;
}

.empty-results i {
    font-size: 3rem;
    color: #bee3f8;
    margin-bottom: 15px;
    display: block;
}

/* Examples Section */
.examples-section {
    margin-top: 30px;
    padding: 20px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.examples-section h3 {
    font-size: 16px;
    font-weight: normal;
    color: #333;
    margin-bottom: 15px;
}

.examples-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.example-card {
    padding: 12px;
    background: #f9f9f9;
    border-radius: 3px;
    border-left: 3px solid #3182ce;
    font-size: 12px;
}

.example-card h4 {
    color: #2c5282;
    margin: 0 0 5px 0;
    font-size: 13px;
    font-weight: 600;
}

.example-problem {
    font-weight: 600;
    color: #333;
    margin-bottom: 5px;
}

.example-solution {
    color: #666;
    font-size: 11px;
}

/* Tips Section */
.tips-section {
    margin-top: 30px;
    padding: 20px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.tips-section h3 {
    font-size: 16px;
    font-weight: normal;
    color: #333;
    margin-bottom: 15px;
}

.tips-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.tip-card {
    padding: 12px;
    background: #f9f9f9;
    border-radius: 3px;
    border-left: 3px solid #3182ce;
    font-size: 12px;
}

.tip-card h4 {
    color: #2c5282;
    margin: 0 0 5px 0;
    font-size: 13px;
    font-weight: normal;
}

.tip-card p {
    color: #666;
    margin: 0;
    line-height: 1.4;
}

/* SEO Content */
.seo-content {
    margin-top: 30px;
    padding: 20px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.seo-content h2 {
    color: #2c5282;
    font-size: 18px;
    font-weight: normal;
    margin: 0 0 15px 0;
}

.seo-content h3 {
    color: #333;
    font-size: 15px;
    font-weight: normal;
    margin: 20px 0 10px 0;
}

.seo-content h4 {
    color: #555;
    font-size: 14px;
    font-weight: normal;
    margin: 15px 0 8px 0;
}

.seo-content p {
    color: #666;
    line-height: 1.6;
    margin-bottom: 12px;
    text-align: justify;
}

.seo-content ul {
    color: #666;
    padding-left: 20px;
    margin-bottom: 12px;
}

.seo-content li {
    margin-bottom: 6px;
    line-height: 1.5;
}

/* Sidebar */
.search-section {
    margin-bottom: 20px;
    display: flex;
    gap: 5px;
}

.search-input {
    flex: 1;
    padding: 6px 8px;
    border: 1px solid #ccc;
    font-size: 13px;
    border-radius: 2px;
}

.search-button {
    background: #2c5282;
    color: white;
    border: none;
    padding: 6px 12px;
    cursor: pointer;
    font-size: 13px;
    border-radius: 2px;
}

.sidebar-widget {
    border: 1px solid #ddd;
    margin-bottom: 20px;
    border-radius: 3px;
}

.widget-header {
    background: #2c5282;
    color: white;
    padding: 10px 15px;
    font-weight: normal;
    font-size: 14px;
}

.widget-content {
    padding: 15px;
}

.calculator-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.calc-column {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.calc-link {
    color: #0066cc;
    text-decoration: none;
    font-size: 13px;
    padding: 2px 0;
}

.calc-link:hover {
    text-decoration: underline;
}

/* Responsive Design */
@media (max-width: 768px) {
    .breadcrumb-nav {
        padding: 8px 15px 6px 15px;
        font-size: 11px;
    }
    
    .hero-banner {
        padding: 12px 15px;
    }
    
    .hero-content h1 {
        font-size: 18px;
        margin-bottom: 5px;
    }
    
    .hero-subtitle {
        font-size: 12px;
        margin-bottom: 6px;
    }
    
    .hero-features {
        gap: 10px;
        font-size: 11px;
    }
    
    .content-wrapper {
        padding: 12px 15px;
    }
    
    .main-layout {
        flex-direction: column;
    }
    
    .right-sidebar {
        width: 100%;
    }
    
    .calc-mode-tabs {
        flex-wrap: wrap;
    }
    
    .mode-tab {
        padding: 8px 12px;
        font-size: 12px;
    }
    
    .label-cell {
        width: auto;
        display: block;
        padding: 10px 15px 5px;
        border-bottom: none;
    }
    
    .input-cell {
        display: block;
        padding: 5px 15px 10px;
    }
    
    .form-input {
        width: 100%;
        max-width: 100%;
    }
    
    .examples-grid {
        grid-template-columns: 1fr;
    }
    
    .tips-grid {
        grid-template-columns: 1fr;
    }
    
    .calculator-grid {
        grid-template-columns: 1fr;
    }
    
    .result-value {
        font-size: 28px;
    }
}

@media (max-width: 480px) {
    .hero-content h1 {
        font-size: 16px;
    }
    
    .hero-features {
        flex-direction: column;
        gap: 6px;
    }
    
    .form-input {
        font-size: 16px;
    }
}
</style>

<div class="percentage-calculator-page">
    <!-- Breadcrumb -->
    <div class="breadcrumb-nav">
        <a href="{% url 'calculators:home' %}">home</a> / 
        <a href="{% url 'calculators:home' %}">financial</a> / 
        <span>percentage calculator</span>
    </div>

    <!-- Hero Banner -->
    <section class="hero-banner">
        <div class="hero-content">
            <h1>Percentage Calculator</h1>
            <p class="hero-subtitle">
                Calculate percentage increases, decreases, discounts, tips, and more with our comprehensive percentage calculator. Fast, accurate, and easy to use.
            </p>
            <div class="hero-features">
                <div class="hero-feature">
                    <i class="fas fa-check-circle"></i>
                    <span>Multiple Calculations</span>
                </div>
                <div class="hero-feature">
                    <i class="fas fa-chart-line"></i>
                    <span>Percentage Change</span>
                </div>
                <div class="hero-feature">
                    <i class="fas fa-tag"></i>
                    <span>Discount Calculator</span>
                </div>
                <div class="hero-feature">
                    <i class="fas fa-percentage"></i>
                    <span>100% Free</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="content-wrapper">
        <div class="main-layout">
            <!-- Left Content -->
            <div class="left-content">
                <!-- Calculator Mode Tabs -->
                <div class="calc-mode-tabs">
                    <button class="mode-tab active" onclick="switchMode('basic')">
                        <i class="fas fa-percent"></i> Basic
                    </button>
                    <button class="mode-tab" onclick="switchMode('change')">
                        <i class="fas fa-chart-line"></i> Change
                    </button>
                    <button class="mode-tab" onclick="switchMode('discount')">
                        <i class="fas fa-tag"></i> Discount
                    </button>
                    <button class="mode-tab" onclick="switchMode('tip')">
                        <i class="fas fa-dollar-sign"></i> Tip
                    </button>
                </div>

                <!-- Instruction Banner -->
                <div class="instruction-banner" id="instruction-text">
                    <span class="check-icon">✓</span>
                    <span id="instruction-content">Enter values to calculate percentage</span>
                </div>

                <!-- Basic Percentage Form -->
                <div class="form-section active" id="basic-section">
                    <div class="calculator-form">
                        <form id="basic-form">
                            <table class="form-table">
                                <tr>
                                    <td class="label-cell">Value</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="basic_value" 
                                               name="basic_value" 
                                               class="form-input" 
                                               placeholder="100"
                                               step="any">
                                        <span class="input-hint">The number to calculate percentage of</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="label-cell">Percentage (%)</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="basic_percentage" 
                                               name="basic_percentage" 
                                               class="form-input" 
                                               placeholder="25"
                                               step="any">
                                        <span class="input-hint">The percentage value</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="button-cell">
                                        <button type="button" class="calculate-button" onclick="calculateBasic()">
                                            <i class="fas fa-calculator"></i> Calculate
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                </div>

                <!-- Percentage Change Form -->
                <div class="form-section" id="change-section">
                    <div class="calculator-form">
                        <form id="change-form">
                            <table class="form-table">
                                <tr>
                                    <td class="label-cell">Original Value</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="old_value" 
                                               name="old_value" 
                                               class="form-input" 
                                               placeholder="100"
                                               step="any">
                                        <span class="input-hint">The starting/original value</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="label-cell">New Value</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="new_value" 
                                               name="new_value" 
                                               class="form-input" 
                                               placeholder="120"
                                               step="any">
                                        <span class="input-hint">The new/ending value</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="button-cell">
                                        <button type="button" class="calculate-button" onclick="calculateChange()">
                                            <i class="fas fa-calculator"></i> Calculate Change
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                </div>

                <!-- Discount Form -->
                <div class="form-section" id="discount-section">
                    <div class="calculator-form">
                        <form id="discount-form">
                            <table class="form-table">
                                <tr>
                                    <td class="label-cell">Original Price</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="original_price" 
                                               name="original_price" 
                                               class="form-input" 
                                               placeholder="100"
                                               step="0.01"
                                               min="0">
                                        <span class="input-hint">The original price</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="label-cell">Discount (%)</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="discount_percent" 
                                               name="discount_percent" 
                                               class="form-input" 
                                               placeholder="20"
                                               step="any">
                                        <span class="input-hint">Discount percentage</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="button-cell">
                                        <button type="button" class="calculate-button" onclick="calculateDiscount()">
                                            <i class="fas fa-calculator"></i> Calculate Price
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                </div>

                <!-- Tip Calculator Form -->
                <div class="form-section" id="tip-section">
                    <div class="calculator-form">
                        <form id="tip-form">
                            <table class="form-table">
                                <tr>
                                    <td class="label-cell">Bill Amount</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="bill_amount" 
                                               name="bill_amount" 
                                               class="form-input" 
                                               placeholder="50.00"
                                               step="0.01"
                                               min="0">
                                        <span class="input-hint">Total bill amount</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="label-cell">Tip (%)</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="tip_percent" 
                                               name="tip_percent" 
                                               class="form-input" 
                                               placeholder="15"
                                               step="any"
                                               min="0">
                                        <span class="input-hint">Tip percentage</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="label-cell">Number of People</td>
                                    <td class="input-cell">
                                        <input type="number" 
                                               id="people_count" 
                                               name="people_count" 
                                               class="form-input" 
                                               placeholder="1"
                                               min="1"
                                               value="1">
                                        <span class="input-hint">Split bill among</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="button-cell">
                                        <button type="button" class="calculate-button" onclick="calculateTip()">
                                            <i class="fas fa-calculator"></i> Calculate Tip
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="results-section" style="display: none;">
                    <div class="results-container">
                        <div id="results-content">
                            <!-- Results will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Examples Section -->
                <div class="examples-section">
                    <h3>Percentage Calculator Examples</h3>
                    <div class="examples-grid">
                        <div class="example-card">
                            <h4>Basic Percentage</h4>
                            <div class="example-problem">What is 25% of 200?</div>
                            <div class="example-solution">Answer: (25 ÷ 100) × 200 = 50</div>
                        </div>
                        <div class="example-card">
                            <h4>Percentage Increase</h4>
                            <div class="example-problem">Price increased from $100 to $120</div>
                            <div class="example-solution">Change: ((120-100) ÷ 100) × 100 = 20%</div>
                        </div>
                        <div class="example-card">
                            <h4>Discount Calculation</h4>
                            <div class="example-problem">20% discount on $150 item</div>
                            <div class="example-solution">Final: $150 - (20% of $150) = $120</div>
                        </div>
                        <div class="example-card">
                            <h4>Tip Calculation</h4>
                            <div class="example-problem">15% tip on $80 for 4 people</div>
                            <div class="example-solution">Tip: $12, Total: $92, Each: $23</div>
                        </div>
                    </div>
                </div>

                <!-- Tips Section -->
                <div class="tips-section">
                    <h3>Percentage Calculation Tips</h3>
                    <div class="tips-grid">
                        <div class="tip-card">
                            <h4>Quick Mental Math</h4>
                            <p>To find 10%, move the decimal point one place left. For 5%, find 10% and divide by 2. These simple tricks make percentage calculations faster.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Percentage vs Points</h4>
                            <p>A change from 20% to 25% is a 5 percentage point increase, but a 25% relative increase. Understanding this difference is crucial for accurate analysis.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Compound Percentages</h4>
                            <p>When applying multiple percentage changes, calculate each step separately, not by adding percentages. A 10% increase then 10% decrease doesn't return to the original value.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Reverse Calculations</h4>
                            <p>If you know the percentage result, you can work backwards to find the original value or percentage. This is useful for many real-world scenarios.</p>
                        </div>
                    </div>
                </div>

                <!-- SEO Content - Abbreviated for space, see full version below -->
                <div class="seo-content">
                    <h2>Complete Guide to Percentage Calculations</h2>
                    
                    <h3>What is a Percentage Calculator?</h3>
                    <p>A percentage calculator is a mathematical tool that helps you perform various percentage-related calculations quickly and accurately. Whether you need to calculate basic percentages, percentage changes, discounts, markups, or tips, our comprehensive percentage calculator handles all types of percentage math with precision.</p>
                    
                    <h3>Types of Percentage Calculations</h3>
                    
                    <h4>Basic Percentage Calculation</h4>
                    <p>The most fundamental percentage calculation answers "What is X% of Y?" This is used daily for sales tax, grade calculations, budget allocations, and financial planning. The formula is: (Percentage ÷ 100) × Value = Result</p>
                    
                    <h4>Percentage Change Calculator</h4>
                    <p>Percentage change calculations help you understand how much something has increased or decreased relative to its original value. This is crucial for stock market analysis, business growth metrics, economic indicators, and performance tracking. Formula: ((New Value - Original Value) ÷ Original Value) × 100</p>
                    
                    <h4>Discount and Markup Calculator</h4>
                    <p>Essential for retail, e-commerce, and business pricing strategies. Calculate sale prices, customer savings, wholesale markups, and profit margins accurately. Perfect for promotional pricing and understanding pricing impact on profitability.</p>
                    
                    <h4>Tip Calculator</h4>
                    <p>Calculate appropriate tips based on service quality, determine tips for various services (delivery, taxi, hotel), split bills fairly among groups, and adjust tipping for international travel based on local customs.</p>
                    
                    <h3>Common Use Cases</h3>
                    
                    <h4>Educational Applications</h4>
                    <p>Students and educators use percentage calculators for grade calculations, GPA conversions, test score analysis, and understanding probability concepts.</p>
                    
                    <h4>Business and Finance</h4>
                    <p>Professionals use percentage calculations for financial statement analysis, investment returns, portfolio performance, budget planning, market share analysis, and employee performance reviews. Understanding percentages is fundamental to business decision-making.</p>
                    
                    <h4>Personal Finance</h4>
                    <p>Individuals rely on percentage calculators for loan interest calculations, savings goals, insurance coverage, tax calculations, and investment allocation. These calculations help with financial planning and decision-making.</p>
                    
                    <h4>Shopping and Consumer</h4>
                    <p>Consumers benefit when comparing prices, understanding cashback rewards, calculating sales tax, evaluating subscription values, and planning major purchases with financing options.</p>
                    
                    <h3>Percentage Calculation Formulas</h3>
                    
                    <h4>Basic Formula</h4>
                    <p>Formula: (Percentage ÷ 100) × Number = Result<br>
                    Example: What is 15% of 240? Answer: (15 ÷ 100) × 240 = 36</p>
                    
                    <h4>Percentage Change</h4>
                    <p>Formula: ((New - Old) ÷ Old) × 100 = Change %<br>
                    Example: $50 to $65 = ((65-50) ÷ 50) × 100 = 30% increase</p>
                    
                    <h4>Discount Calculation</h4>
                    <p>Formula: Original - (Discount % ÷ 100) × Original = Final<br>
                    Example: 25% off $80 = $80 - (25÷100) × $80 = $60</p>
                    
                    <h3>Common Mistakes to Avoid</h3>
                    <ul>
                        <li>Confusing percentage points with percentage changes</li>
                        <li>Adding percentages when compound calculations are needed</li>
                        <li>Using the wrong base value for calculations</li>
                        <li>Misunderstanding the direction of percentage changes</li>
                        <li>Rounding too early in multi-step calculations</li>
                    </ul>
                    
                    <h3>Real-World Applications</h3>
                    <p>Percentage calculations are used in healthcare for medication dosing, in sports for performance statistics, in marketing for conversion rates, and in manufacturing for quality control. Understanding percentages is essential across virtually every industry and aspect of daily life.</p>
                    
                    <h3>Conclusion</h3>
                    <p>Our percentage calculator provides accurate, instant results for all common percentage calculations. Whether you're a student, professional, or making everyday calculations, understanding percentages and having reliable tools is essential for informed decision-making.</p>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="right-sidebar">
                <!-- Search Box -->
                <div class="search-section">
                    <input type="text" class="search-input" placeholder="Search...">
                    <button class="search-button">Search</button>
                </div>

                <!-- Related Calculators -->
                <div class="sidebar-widget">
                    <div class="widget-header">Related Calculators</div>
                    <div class="widget-content">
                        <div class="calculator-grid">
                            <div class="calc-column">
                                <a href="{% url 'calculators:loan_calculator' %}" class="calc-link">Loan Calculator</a>
                                <a href="{% url 'calculators:mortgage_calculator' %}" class="calc-link">Mortgage</a>
                                <a href="{% url 'calculators:401k_calculator' %}" class="calc-link">401k Calculator</a>
                            </div>
                            <div class="calc-column">
                                <a href="{% url 'calculators:gpa_calculator' %}" class="calc-link">GPA Calculator</a>
                                <a href="{% url 'calculators:grade_calculator' %}" class="calc-link">Grade Calculator</a>
                                <a href="{% url 'calculators:home' %}" class="calc-link">More Tools</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Tips -->
                <div class="sidebar-widget">
                    <div class="widget-header">Quick Tips</div>
                    <div class="widget-content">
                        <div style="font-size: 12px; color: #666; line-height: 1.5;">
                            <p style="margin-bottom: 10px;"><strong>💡 Quick 10%:</strong> Move decimal left one place. 10% of 45 = 4.5</p>
                            <p style="margin-bottom: 10px;"><strong>📊 Quick 25%:</strong> Divide by 4. 25% of 80 = 20</p>
                            <p style="margin-bottom: 10px;"><strong>🎯 Quick 50%:</strong> Divide by 2. 50% of 100 = 50</p>
                            <p style="margin: 0;"><strong>✅ Verify:</strong> Your result multiplied by 100 and divided by the original should equal the percentage.</p>
                        </div>
                    </div>
                </div>

                <!-- Common Percentages -->
                <div class="sidebar-widget">
                    <div class="widget-header">Common Percentages</div>
                    <div class="widget-content">
                        <table style="width: 100%; font-size: 12px; border-collapse: collapse;">
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 6px 0;">10%</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">÷ 10</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 6px 0;">20%</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">÷ 5</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 6px 0;">25%</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">÷ 4</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 6px 0;">33.33%</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">÷ 3</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 6px 0;">50%</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">÷ 2</td>
                            </tr>
                            <tr>
                                <td style="padding: 6px 0;">100%</td>
                                <td style="padding: 6px 0; text-align: right; color: #666;">× 1</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Mode switching
function switchMode(mode) {
    // Update instruction text
    const instructions = {
        'basic': 'Enter value and percentage to calculate',
        'change': 'Enter original and new values to find percentage change',
        'discount': 'Enter original price and discount percentage',
        'tip': 'Enter bill amount, tip percentage, and number of people'
    };
    document.getElementById('instruction-content').textContent = instructions[mode];
    
    // Update tabs
    document.querySelectorAll('.mode-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    event.target.closest('.mode-tab').classList.add('active');
    
    // Update form sections
    document.querySelectorAll('.form-section').forEach(section => {
        section.classList.remove('active');
    });
    document.getElementById(mode + '-section').classList.add('active');
    
    // Hide results
    document.getElementById('results-section').style.display = 'none';
}

// Basic Percentage Calculation
function calculateBasic() {
    const value = parseFloat(document.getElementById('basic_value').value);
    const percentage = parseFloat(document.getElementById('basic_percentage').value);
    
    if (isNaN(value) || isNaN(percentage)) {
        return;
    }
    
    const result = (percentage / 100) * value;
    
    document.getElementById('results-content').innerHTML = `
        <div class="result-highlight">
            <div class="result-label">Result</div>
            <div class="result-value">${result.toFixed(2)}</div>
            <div class="result-subtitle">${percentage}% of ${value}</div>
        </div>
        
        <div class="breakdown-section">
            <h4>Calculation Details</h4>
            <div class="breakdown-item">
                <span class="breakdown-label">Formula</span>
                <span class="breakdown-value">(${percentage} ÷ 100) × ${value}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Decimal Form</span>
                <span class="breakdown-value">${(percentage/100).toFixed(4)} × ${value}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Result</span>
                <span class="breakdown-value">${result.toFixed(2)}</span>
            </div>
        </div>
    `;
    
    showResults();
}

// Percentage Change Calculation
function calculateChange() {
    const oldValue = parseFloat(document.getElementById('old_value').value);
    const newValue = parseFloat(document.getElementById('new_value').value);
    
    if (isNaN(oldValue) || isNaN(newValue)) {
        return;
    }
    
    if (oldValue === 0) {
        alert('Cannot calculate percentage change when original value is 0');
        return;
    }
    
    const change = newValue - oldValue;
    const percentChange = (change / oldValue) * 100;
    const changeType = change >= 0 ? 'Increase' : 'Decrease';
    const changeColor = change >= 0 ? '#10b981' : '#ef4444';
    
    document.getElementById('results-content').innerHTML = `
        <div class="result-highlight">
            <div class="result-label">${changeType}</div>
            <div class="result-value" style="color: ${changeColor}">${Math.abs(percentChange).toFixed(2)}%</div>
            <div class="result-subtitle">From ${oldValue} to ${newValue}</div>
        </div>
        
        <div class="breakdown-section">
            <h4>Calculation Details</h4>
            <div class="breakdown-item">
                <span class="breakdown-label">Original Value</span>
                <span class="breakdown-value">${oldValue}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">New Value</span>
                <span class="breakdown-value">${newValue}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Absolute Change</span>
                <span class="breakdown-value">${Math.abs(change).toFixed(2)}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Formula</span>
                <span class="breakdown-value">((${newValue} - ${oldValue}) ÷ ${oldValue}) × 100</span>
            </div>
        </div>
    `;
    
    showResults();
}

// Discount Calculation
function calculateDiscount() {
    const originalPrice = parseFloat(document.getElementById('original_price').value);
    const discountPercent = parseFloat(document.getElementById('discount_percent').value);
    
    if (isNaN(originalPrice) || isNaN(discountPercent)) {
        return;
    }
    
    const discountAmount = (discountPercent / 100) * originalPrice;
    const finalPrice = originalPrice - discountAmount;
    
    document.getElementById('results-content').innerHTML = `
        <div class="result-highlight">
            <div class="result-label">Final Price</div>
            <div class="result-value">$${finalPrice.toFixed(2)}</div>
            <div class="result-subtitle">After ${discountPercent}% discount</div>
        </div>
        
        <div class="breakdown-section">
            <h4>Price Breakdown</h4>
            <div class="breakdown-item">
                <span class="breakdown-label">Original Price</span>
                <span class="breakdown-value">$${originalPrice.toFixed(2)}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Discount (${discountPercent}%)</span>
                <span class="breakdown-value">-$${discountAmount.toFixed(2)}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">You Save</span>
                <span class="breakdown-value" style="color: #10b981;">$${discountAmount.toFixed(2)}</span>
            </div>
            <div class="breakdown-item" style="border-top: 2px solid #2c5282; margin-top: 8px; padding-top: 12px;">
                <span class="breakdown-label"><strong>Final Price</strong></span>
                <span class="breakdown-value" style="font-size: 16px;">$${finalPrice.toFixed(2)}</span>
            </div>
        </div>
    `;
    
    showResults();
}

// Tip Calculation
function calculateTip() {
    const billAmount = parseFloat(document.getElementById('bill_amount').value);
    const tipPercent = parseFloat(document.getElementById('tip_percent').value);
    const peopleCount = parseInt(document.getElementById('people_count').value);
    
    if (isNaN(billAmount) || isNaN(tipPercent) || isNaN(peopleCount) || peopleCount < 1) {
        return;
    }
    
    const tipAmount = (tipPercent / 100) * billAmount;
    const totalBill = billAmount + tipAmount;
    const perPerson = totalBill / peopleCount;
    
    document.getElementById('results-content').innerHTML = `
        <div class="result-highlight">
            <div class="result-label">Per Person</div>
            <div class="result-value">$${perPerson.toFixed(2)}</div>
            <div class="result-subtitle">${peopleCount} ${peopleCount === 1 ? 'person' : 'people'} splitting</div>
        </div>
        
        <div class="breakdown-section">
            <h4>Bill Breakdown</h4>
            <div class="breakdown-item">
                <span class="breakdown-label">Original Bill</span>
                <span class="breakdown-value">$${billAmount.toFixed(2)}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Tip (${tipPercent}%)</span>
                <span class="breakdown-value">$${tipAmount.toFixed(2)}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Total Bill</span>
                <span class="breakdown-value">$${totalBill.toFixed(2)}</span>
            </div>
            <div class="breakdown-item">
                <span class="breakdown-label">Number of People</span>
                <span class="breakdown-value">${peopleCount}</span>
            </div>
            <div class="breakdown-item" style="border-top: 2px solid #2c5282; margin-top: 8px; padding-top: 12px;">
                <span class="breakdown-label"><strong>Per Person</strong></span>
                <span class="breakdown-value" style="font-size: 16px;">$${perPerson.toFixed(2)}</span>
            </div>
        </div>
    `;
    
    showResults();
}

function showResults() {
    const resultsSection = document.getElementById('results-section');
    resultsSection.style.display = 'block';
    
    setTimeout(() => {
        const rect = resultsSection.getBoundingClientRect();
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const targetPosition = rect.top + scrollTop - 100;
        
        window.scrollTo({ top: targetPosition, behavior: 'smooth' });
        
        resultsSection.style.transition = 'box-shadow 0.5s ease';
        resultsSection.style.boxShadow = '0 0 30px rgba(44, 82, 130, 0.6)';
        
        setTimeout(() => {
            resultsSection.style.boxShadow = '0 0 15px rgba(44, 82, 130, 0.3)';
            setTimeout(() => {
                resultsSection.style.boxShadow = 'none';
            }, 1500);
        }, 600);
    }, 100);
}

// Auto-calculate on input
document.addEventListener('DOMContentLoaded', function() {
    // Basic calculator
    document.getElementById('basic_value').addEventListener('input', calculateBasic);
    document.getElementById('basic_percentage').addEventListener('input', calculateBasic);
    
    // Change calculator
    document.getElementById('old_value').addEventListener('input', calculateChange);
    document.getElementById('new_value').addEventListener('input', calculateChange);
    
    // Discount calculator
    document.getElementById('original_price').addEventListener('input', calculateDiscount);
    document.getElementById('discount_percent').addEventListener('input', calculateDiscount);
    
    // Tip calculator
    document.getElementById('bill_amount').addEventListener('input', calculateTip);
    document.getElementById('tip_percent').addEventListener('input', calculateTip);
    document.getElementById('people_count').addEventListener('input', calculateTip);
});
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Percentage Calculator",
  "alternateName": ["Percent Calculator", "Percentage Change Calculator", "Discount Calculator", "Tip Calculator"],
  "description": "Free online percentage calculator to calculate percentages, percentage changes, discounts, tips, and more. Fast, accurate, and easy to use with multiple calculation modes.",
  "url": "{{ request.build_absolute_uri }}",
  "applicationCategory": "UtilityApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "provider": {
    "@type": "Organization",
    "name": "myCalculator.us",
    "url": "{% url 'calculators:home' %}"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "ratingCount": "7834"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I calculate a percentage?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "To calculate a percentage, divide the percentage by 100 and multiply by the value. For example, to find 25% of 200: (25 ÷ 100) × 200 = 50. Our calculator does this automatically when you enter the values."
      }
    },
    {
      "@type": "Question",
      "name": "How do I calculate percentage change?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "To calculate percentage change, subtract the original value from the new value, divide by the original value, and multiply by 100. Formula: ((New - Old) ÷ Old) × 100. Use our Percentage Change calculator mode for instant results."
      }
    },
    {
      "@type": "Question",
      "name": "How do I calculate a discount percentage?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "To calculate a discount, multiply the original price by the discount percentage (as a decimal), then subtract that amount from the original price. For 20% off $100: $100 - ($100 × 0.20) = $80. Our Discount calculator shows you the final price and savings."
      }
    },
    {
      "@type": "Question",
      "name": "What's the difference between percentage points and percentage change?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Percentage points measure absolute difference while percentage change measures relative difference. If unemployment rises from 5% to 7%, that's a 2 percentage point increase but a 40% relative increase ((7-5)÷5×100=40%)."
      }
    }
  ]
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ request.scheme }}://{{ request.get_host }}{% url 'calculators:home' %}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Financial Calculators",
      "item": "{{ request.scheme }}://{{ request.get_host }}{% url 'calculators:home' %}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Percentage Calculator",
      "item": "{{ request.build_absolute_uri }}"
    }
  ]
}
</script>

{% endblock %}